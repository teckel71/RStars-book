<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>6 Componentes principales. | R-Stars: La Guía</title>
<meta name="author" content="Miguel-Ángel Tarancón">
<meta name="description" content="Carguero a dos niveles de resolución.  6.1 Introducción. A veces, menos es más. Esta es la filosofía que subyace a las técnicas de reducción de la dimensión de la información. Imaginemos una serie...">
<meta name="generator" content="bookdown 0.44 with bs4_book()">
<meta property="og:title" content="6 Componentes principales. | R-Stars: La Guía">
<meta property="og:type" content="book">
<meta property="og:url" content="https://teckel71.github.io/RStars-book/componentes-principales..html">
<meta property="og:image" content="https://teckel71.github.io/RStars-book/figuras/Portada_v3-2.jpg">
<meta property="og:description" content="Carguero a dos niveles de resolución.  6.1 Introducción. A veces, menos es más. Esta es la filosofía que subyace a las técnicas de reducción de la dimensión de la información. Imaginemos una serie...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="6 Componentes principales. | R-Stars: La Guía">
<meta name="twitter:description" content="Carguero a dos niveles de resolución.  6.1 Introducción. A veces, menos es más. Esta es la filosofía que subyace a las técnicas de reducción de la dimensión de la información. Imaginemos una serie...">
<meta name="twitter:image" content="https://teckel71.github.io/RStars-book/figuras/Portada_v3-2.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Inter-0.4.10/font.css" rel="stylesheet">
<link href="libs/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="libs/Inter_Tight-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="assets/styles.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R-Stars: La Guía</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li><a class="" href="prefacio.html">Prefacio</a></li>
<li><a class="" href="introducci%C3%B3n..html"><span class="header-section-number">1</span> Introducción.</a></li>
<li><a class="" href="almacenando-y-manipulando-datos..html"><span class="header-section-number">2</span> Almacenando y manipulando datos.</a></li>
<li><a class="" href="gr%C3%A1ficos..html"><span class="header-section-number">3</span> Gráficos.</a></li>
<li><a class="" href="estad%C3%ADstica-descriptiva..html"><span class="header-section-number">4</span> Estadística descriptiva.</a></li>
<li><a class="" href="an%C3%A1lisis-previo-de-datos..html"><span class="header-section-number">5</span> Análisis previo de datos.</a></li>
<li><a class="active" href="componentes-principales..html"><span class="header-section-number">6</span> Componentes principales.</a></li>
<li><a class="" href="an%C3%A1lisis-cl%C3%BAster..html"><span class="header-section-number">7</span> Análisis Clúster.</a></li>
<li><a class="" href="an%C3%A1lisis-de-la-varianza..html"><span class="header-section-number">8</span> Análisis de la varianza.</a></li>
<li><a class="" href="an%C3%A1lisis-de-regresi%C3%B3n-lineal-m%C3%BAltiple..html"><span class="header-section-number">9</span> Análisis de Regresión Lineal Múltiple.</a></li>
<li><a class="" href="an%C3%A1lisis-de-datos-cualitativos..html"><span class="header-section-number">10</span> Análisis de Datos Cualitativos.</a></li>
<li><a class="" href="bibliograf%C3%ADa.html">Bibliografía</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="componentes-principales." class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Componentes principales.<a class="anchor" aria-label="anchor" href="#componentes-principales."><i class="fas fa-link"></i></a>
</h1>
<div class="float">
<img src="figuras/06%20carguero%20renderizado.jpg" style="width:100.0%" alt="Carguero a dos niveles de resolución."><div class="figcaption"><span class="smallcaps">Carguero a dos niveles de resolución.</span></div>
</div>
<div id="introducción.-2" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> <img src="figuras/book.svg" class="hicon"> Introducción.<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n.-2"><i class="fas fa-link"></i></a>
</h2>
<p>A veces, menos es más. Esta es la filosofía que subyace a las <strong>técnicas de reducción de la dimensión</strong> de la información.</p>
<p>Imaginemos una serie de casos (por ejemplo, las empresas de un sector económico) caracterizados por múltiples variables. Puede ocurrir que, paradójicamente, el contar con tantas variables haga difícil la caracterización de los casos. Esto ocurre cuando algunas de las variables aportan una información muy parecida sobre tales casos. Por ejemplo, es más difícil hacerse una idea del comportamiento global en el ámbito económico o financiero de un grupo de empresas si tenemos que atender a los valores que toman en un conjunto de 10 variables, que si solo tenemos que atender a un par de indicadores.</p>
<p>Las técnicas de reducción de la dimensión de la información tratan, precisamente, de disminuir el número de variables necesarias para caracterizar un grupo de casos, aprovechando la posibilidad de que las (múltiples) variables originales compartan información sobre estos. Es decir, la idea fundamental es pasar de un planteamiento basado en manejar muchas variables con información compartida o redundante (variables que “dicen lo mismo” sobre el comportamiento de los casos) a un planteamiento en el que hay <strong>menos variables</strong>, pero que <strong>no comparten información</strong> (variables que “dicen” cosas diferentes sobre el comportamiento de los casos). En este proceso es importante que la pérdida de información sea mínima, y que solo se pierda la información redundante o repetida.</p>
<p>La principal técnica de reducción de la dimensión de la información es la de <strong>componentes principales,</strong> y es la que se expondrá y ejemplificará en el resto del capítulo. Pero antes, es preciso concretar la relación entre dos conceptos muy presentes en esta técnica: información y varianza.</p>
</div>
<div id="información-y-varianza." class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> <img src="figuras/book.svg" class="hicon"> Información y varianza.<a class="anchor" aria-label="anchor" href="#informaci%C3%B3n-y-varianza."><i class="fas fa-link"></i></a>
</h2>
<p>En el apartado anterior hemos hablado de la posibilidad de que algunas variables compartan “información” sobre el comportamiento de los casos que constituyen nuestra muestra u objeto de estudio. Pero, ¿qué es, en este contexto, la “información”?</p>
<p>La <strong><em>información</em></strong> que una variable contiene sobre un conjunto de casos puede entenderse como su <strong>capacidad para diferenciar a unos casos de otros</strong>.</p>
<p>Observemos este ejemplo, en el que se representan los valores que toman un grupo de 20 empresas en 3 variables.</p>
<div class="float">
<img src="figuras/varianza.png" style="width:100.0%" alt="Información y Varianza"><div class="figcaption"><span class="smallcaps">Información y Varianza</span></div>
</div>
<p>En la variable 1, todas las empresas toman el mismo valor. Por tanto, la capacidad que tiene la variable para distinguir a los casos (empresas), unos de otros, es nula. Eso es debido a que, en definitiva, esta variable no contiene información sobre el grupo de 20 empresas.</p>
<p>En la variable 2, existe cierta dispersión, aunque reducida, en los valores que adoptan los casos. Esto permite distinguir a unos de otros, aunque a veces con cierta dificultad. Por ejemplo, la empresa 17 se distingue del resto por ser la que tiene un valor (un poco) mayor. Aun así, como la dispersión es reducida, no se distinguen algunos casos de otros demasiado bien. En definitiva, la variable 2 contiene cierta cantidad de información sobre el conjunto de empresas de la muestra, aunque no demasiado grande.</p>
<p>Por último, la variable 3 muestra una dispersión considerablemente mayor que las otras dos variables. Existe un amplio abanico de valores que toman los diferentes casos (empresas). Esto hace que puedan diferenciarse con facilidad, en general, unos de otros. Esta variable posee, por tanto, una cantidad de información superior respecto a las empresas, ya que observando los valores que toman en la variable pueden diferenciarse con facilidad unas de otras.</p>
<p>Como conclusión, podemos establecer que cuanto mayor dispersión muestra una variable para un grupo de casos, mayor cantidad de información contiene sobre ellos, en el sentido de disfrutar de un mayor “poder” de diferenciación de unos casos respecto a otros.</p>
<p>Una medida de la dispersión de una variable usualmente utilizada es la <strong>varianza</strong>. Por tanto, en cierta manera, la varianza sirve para medir la cantidad de información que contiene la variable: a mayor varianza, mayor dispersión. Y a mayor dispersión, mayor cantidad de información.</p>
<p>En el ejemplo, puede observarse cómo la variable 3 es la que mayor varianza tiene, luego la variable 2, y la variable 1 tiene una varianza de 0 (y no posee información sobre las 20 empresas). Esta comparación de varianzas es válida siempre y cuando las tres variables estén expresadas en las mismas unidades, ya que la varianza es una medida de dispersión absoluta. Por ello, para poder comparar, hemos añadido también en el ejemplo una medida de dispersión relativa: el coeficiente de variación. Podemos comprobar cómo el mayor coeficiente de variación pertenece a la variable 3 (que es la que tiene una mayor cantidad de información), luego la variable 2 (que cuenta con menor cantidad de información), y por último la variable 1, con un coeficiente de 0 (no contiene información sobre las empresas).</p>
</div>
<div id="la-elección-de-arg-us-korp." class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> <img src="figuras/star.svg" class="hicon"> La elección de <em>Arg-Us Korp</em>.<a class="anchor" aria-label="anchor" href="#la-elecci%C3%B3n-de-arg-us-korp."><i class="fas fa-link"></i></a>
</h2>
<p>Vamos a considerar el caso del sector del “Transporte Interestelar”. Tenemos una selección de 104 empresas o compañías. El “magnate” de los negocios a escala interplanetaria, <em>Arg-us</em> <em>Korp</em> en la imagen), está de compras: quiere adquirir una de las empresas que mejor proyección a futuro en el sector, tenga.</p>
<div class="float">
<img src="figuras/Arg-Us%20Korp.jpg" class="d-block mx-auto" width="500" alt="Arg-Us Korp."><div class="figcaption"><span class="smallcaps">Arg-Us Korp.</span></div>
</div>
<p>Hay varias variables disponibles que pueden ser interpretadas como <em>indicadores</em> de la preparación de las diferentes compañías de transporte para afrontar el futuro, como por ejemplo:</p>
<ol style="list-style-type: decimal">
<li>
<p><strong>IMD (Gasto en I+D)</strong></p>
<ul>
<li>Justificación: Una inversión alta en investigación y desarrollo indica que la empresa está preparándose para innovaciones tecnológicas, lo que le permitirá mejorar su eficiencia, reducir costos y mantenerse competitiva en el futuro.</li>
</ul>
</li>
<li>
<p><strong>IDIG (Índice de Digitalización)</strong></p>
<ul>
<li>Justificación: La digitalización es un factor clave en la eficiencia operativa y la adaptabilidad a nuevas tecnologías. Un alto IDIG sugiere que la empresa está invirtiendo en automatización, software avanzado y optimización de procesos.</li>
</ul>
</li>
<li>
<p><strong>EFLO (Edad Media de la Flota)</strong></p>
<ul>
<li>Justificación: Contar con una flota renovada significa menor riesgo de fallas mecánicas, menores costos de mantenimiento y mayor eficiencia en las operaciones, lo que permite mantener ventajas competitivas a largo plazo.</li>
</ul>
</li>
<li>
<p><strong>CAPEX (Gastos de Capital)</strong></p>
<ul>
<li>Justificación: Empresas que invierten en infraestructura y equipamiento moderno están mejor preparadas para el crecimiento y la adaptación a nuevas demandas del mercado.</li>
</ul>
</li>
<li>
<p><strong>IDIVERSE (Índice de Diversificación)</strong></p>
<ul>
<li>Justificación: Empresas con operaciones diversificadas tienen mayor resiliencia ante cambios del mercado, ya que no dependen de una única fuente de ingresos o de un solo tipo de carga.</li>
</ul>
</li>
<li>
<p><strong>RUTAS (Número de Rutas Atendidas)</strong></p>
<ul>
<li>Justificación: La expansión de rutas refleja una empresa con visión de crecimiento y acceso a mercados emergentes, lo que fortalece su sostenibilidad a largo plazo.</li>
</ul>
</li>
<li>
<p><strong>SOLVENCIA</strong></p>
<ul>
<li>Justificación: Empresas con una solvencia alta tienen mayor capacidad de enfrentar crisis económicas o períodos de baja demanda sin comprometer su estabilidad financiera.</li>
</ul>
</li>
<li>
<p><strong>BMAL (Beneficio Medio por Año Luz)</strong></p>
<ul>
<li>Justificación: Un alto BMAL indica eficiencia en la operación y rentabilidad sostenible, lo que contribuye a la capacidad de la empresa para reinvertir y mejorar su competitividad.</li>
</ul>
</li>
<li>
<p><strong>IFIDE (Índice de Fidelización)</strong></p>
<ul>
<li>Justificación: Un alto nivel de fidelización sugiere que la empresa ha construido relaciones sólidas con sus clientes, lo que le proporciona estabilidad de ingresos y ventajas competitivas a futuro.</li>
</ul>
</li>
</ol>
<p>Estos indicadores reflejan la capacidad de innovación, estabilidad financiera, expansión de mercado y eficiencia operativa de las empresas, factores esenciales para su sostenibilidad en el tiempo y preparación para los desafíos futuros.</p>
<p>De entre ellas, <em>Korp</em> ha seleccionado <strong>IDIVERSE</strong>, <strong>IFIDE</strong> e <strong>IDIG</strong> como aspectos que le importan especialmente. Aún así, su equipo sabe que su jefe quiere una respuesta precisa. Un nombre de una empresa.</p>
<p>Así, el equipo ha pensado en crear un ranking de compañías basándose en estos tres indicadores. Pero, si tienen 3 variables, ¿cómo combinar su análisis para obtener un solo ranking de modo objetivo? ¿Cómo ponderar las tres variables?</p>
<p>La respuesta ha venido al comprobar que las tres variables guardan entre sí unas correlaciones relativamente altas (en valor absoluto). Es decir: aportan una información bastante parecida sobre cada una de las empresas de la selección. Esto es importante porque, si en gran medida comparten información “redundante”, pueden ser, seguramente, “resumidas” en un solo indicador, cuyo valor o puntuación para cada caso (empresa) podría servir para establecer el ranking de compañías candidatas a ser adquiridas.</p>
<p>El método para obtener este indicador a partir de las tres variables originales se llama <strong><em>Análisis de Componentes Principales</em></strong> <strong>(PCA)</strong>, y puede ser fácilmente desarrollado con unas líneas de código de R. Ese indicador, que es la clave de toda la estrategia, será la primera “componente” del PCA, una combinación lineal de las tres variables originales; siempre y cuando su poder para “retener” la información global ofrecida por esas tres variables sea lo suficientemente alto.</p>
</div>
<div id="preparación-previa-de-datos." class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> <img src="figuras/pie-chart.svg" class="hicon"> Preparación previa de datos.<a class="anchor" aria-label="anchor" href="#preparaci%C3%B3n-previa-de-datos."><i class="fas fa-link"></i></a>
</h2>
<p>Vamos a suponer que trabajamos dentro de un <strong>proyecto</strong> que hemos creado previamente, de nombre <strong>“componentes”</strong>. Dentro de la carpeta del proyecto guardaremos estos dos elementos:</p>
<ul>
<li><p>El <em>script</em> llamado “componentes_rstars.R”.</p></li>
<li><p>El archivo de Microsoft® Excel® llamado “interestelar_100.xlsx”. Si abrimos este último archivo, comprobaremos que se compone de tres hojas. La primera muestra un mensaje sobre el uso de los datos, la segunda recoge la descripción de las variables consideradas, y la tercera (hoja “Datos”) almacena los datos que debemos importar. Estos datos se corresponden con diferentes variables económicas y financieras de 104 empresas dedicadas a los servicios de transporte interestelar de mercancías.</p></li>
</ul>
<p>Comenzaremos a ejecutar el código usual en cualquier <em>script</em>, esto es, limpiar el <em>Global Environment</em>, cargar los paquetes necesarios, importar los datos del archivo de Excel®, y tratar los casos con datos faltantes o <em>missing values</em>, y los casos que, para las variables estudiadas, se comportan como <em>ouliers</em>. En cuanto a los primeros pasos, tenemos:</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Análisis de Componentes Principales ###</span></span>
<span></span>
<span><span class="co"># Limpiando el Global Environment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cargando paquetes</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/visdat/">visdat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jthomasmock/gtExtras">gtExtras</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally/">GGally</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## DATOS</span></span>
<span></span>
<span><span class="co"># Importando datos desde Excel</span></span>
<span><span class="va">interestelar_100</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"interestelar_100.xlsx"</span>,</span>
<span>                               sheet <span class="op">=</span> <span class="st">"Datos"</span>,</span>
<span>                               na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"n.d."</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">interestelar_100</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">interestelar_100</span>, row.names <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Seleccionando variables metricas para el analisis.</span></span>
<span><span class="va">seleccion</span> <span class="op">&lt;-</span> <span class="va">interestelar_100</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">IDIVERSE</span>, <span class="va">IFIDE</span>, <span class="va">IDIG</span><span class="op">)</span></span>
<span><span class="va">seleccion_df_graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_plt_summary.html">gt_plt_summary</a></span><span class="op">(</span><span class="va">seleccion</span><span class="op">)</span></span>
<span><span class="va">seleccion_df_graph</span></span></code></pre></div>
<div id="ijtrmnqnfh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#ijtrmnqnfh table {
  font-family: Lato, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ijtrmnqnfh thead, #ijtrmnqnfh tbody, #ijtrmnqnfh tfoot, #ijtrmnqnfh tr, #ijtrmnqnfh td, #ijtrmnqnfh th {
  border-style: none;
}

#ijtrmnqnfh p {
  margin: 0;
  padding: 0;
}

#ijtrmnqnfh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #FFFFFF;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ijtrmnqnfh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ijtrmnqnfh .gt_title {
  color: #333333;
  font-size: 24px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ijtrmnqnfh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ijtrmnqnfh .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ijtrmnqnfh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
}

#ijtrmnqnfh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ijtrmnqnfh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ijtrmnqnfh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ijtrmnqnfh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ijtrmnqnfh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ijtrmnqnfh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ijtrmnqnfh .gt_spanner_row {
  border-bottom-style: hidden;
}

#ijtrmnqnfh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ijtrmnqnfh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ijtrmnqnfh .gt_from_md > :first-child {
  margin-top: 0;
}

#ijtrmnqnfh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ijtrmnqnfh .gt_row {
  padding-top: 7px;
  padding-bottom: 7px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #F6F7F7;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ijtrmnqnfh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ijtrmnqnfh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ijtrmnqnfh .gt_row_group_first td {
  border-top-width: 2px;
}

#ijtrmnqnfh .gt_row_group_first th {
  border-top-width: 2px;
}

#ijtrmnqnfh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ijtrmnqnfh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ijtrmnqnfh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ijtrmnqnfh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ijtrmnqnfh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ijtrmnqnfh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ijtrmnqnfh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ijtrmnqnfh .gt_striped {
  background-color: #FAFAFA;
}

#ijtrmnqnfh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ijtrmnqnfh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ijtrmnqnfh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ijtrmnqnfh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ijtrmnqnfh .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ijtrmnqnfh .gt_left {
  text-align: left;
}

#ijtrmnqnfh .gt_center {
  text-align: center;
}

#ijtrmnqnfh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ijtrmnqnfh .gt_font_normal {
  font-weight: normal;
}

#ijtrmnqnfh .gt_font_bold {
  font-weight: bold;
}

#ijtrmnqnfh .gt_font_italic {
  font-style: italic;
}

#ijtrmnqnfh .gt_super {
  font-size: 65%;
}

#ijtrmnqnfh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ijtrmnqnfh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ijtrmnqnfh .gt_indent_1 {
  text-indent: 5px;
}

#ijtrmnqnfh .gt_indent_2 {
  text-indent: 10px;
}

#ijtrmnqnfh .gt_indent_3 {
  text-indent: 15px;
}

#ijtrmnqnfh .gt_indent_4 {
  text-indent: 20px;
}

#ijtrmnqnfh .gt_indent_5 {
  text-indent: 25px;
}

#ijtrmnqnfh .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ijtrmnqnfh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<div class="inline-table"><table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="7" class="gt_heading gt_title gt_font_normal" style>seleccion</td>
    </tr>
<tr class="gt_heading">
<td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>104 rows x 3 cols</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="type"></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="name">Column</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="value">Plot Overview</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n_missing">Missing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Mean">Mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Median">Median</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="SD">SD</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="type" class="gt_row gt_left"><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:20px;width:25px;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f18e2c;overflow:visible;position:relative;"><path d="M576 0c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V32c0-17.7 14.3-32 32-32zM448 96c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V128c0-17.7 14.3-32 32-32zM352 224V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V224c0-17.7 14.3-32 32-32s32 14.3 32 32zM192 288c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V320c0-17.7 14.3-32 32-32zM96 416v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V416c0-17.7 14.3-32 32-32s32 14.3 32 32z"></path></svg></td>
<td headers="name" class="gt_row gt_left" style="font-weight: bold;">IDIVERSE</td>
<td headers="value" class="gt_row gt_center">
<?xml version='1.0' encoding='UTF-8' ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="141.73pt" height="34.02pt" viewbox="0 0 141.73 34.02"><g class="svglite"><defs><style type="text/css"><![CDATA[    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  ]]></style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg=="><rect x="0.00" y="0.00" width="141.73" height="34.02"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg==)"><rect x="0.00" y="0.00" width="141.73" height="34.02" style="stroke-width: 0.00; stroke: none;"></rect></g><defs><clippath id="cpMS4wMHwxNDAuNzR8MS4wMHwyMi42Mw=="><rect x="1.00" y="1.00" width="139.74" height="21.63"></rect></clippath></defs><g clip-path="url(#cpMS4wMHwxNDAuNzR8MS4wMHwyMi42Mw==)"><rect x="7.35" y="18.30" width="14.12" height="4.33" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="21.46" y="1.00" width="14.12" height="21.63" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="35.58" y="2.73" width="14.12" height="19.90" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="49.69" y="7.05" width="14.12" height="15.57" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="63.81" y="1.00" width="14.12" height="21.63" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="77.92" y="18.30" width="14.12" height="4.33" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="92.04" y="21.76" width="14.12" height="0.87" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="106.15" y="22.63" width="14.12" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="120.27" y="21.76" width="14.12" height="0.87" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><circle cx="14.51" cy="21.76" r="0.46" style="stroke-width: 0.71; stroke: none;"></circle><circle cx="14.51" cy="21.76" r="0.46" style="stroke-width: 0.71; stroke: none;"></circle><line x1="48.60" y1="22.63" x2="48.60" y2="1.00" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g><g clip-path="url(#cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg==)"><polyline points="1.00,22.63 140.74,22.63 " style="stroke-width: 0.75;"></polyline><polyline points="15.59,25.46 15.59,22.63 " style="stroke-width: 0.75;"></polyline><polyline points="123.37,25.46 123.37,22.63 " style="stroke-width: 0.75;"></polyline><text x="15.59" y="33.56" text-anchor="middle" style='font-size: 6.00px; font-family: "Arial";' textlength="28.41px" lengthadjust="spacingAndGlyphs">774 mauto</text><text x="123.37" y="33.56" text-anchor="middle" style='font-size: 6.00px; font-family: "Arial";' textlength="20.06px" lengthadjust="spacingAndGlyphs">71 auto</text></g></g></svg>
</td>
<td headers="n_missing" class="gt_row gt_right">1.0%</td>
<td headers="Mean" class="gt_row gt_right">23.8</td>
<td headers="Median" class="gt_row gt_right">22.4</td>
<td headers="SD" class="gt_row gt_right">13.2</td>
</tr>
<tr>
<td headers="type" class="gt_row gt_left gt_striped"><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:20px;width:25px;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f18e2c;overflow:visible;position:relative;"><path d="M576 0c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V32c0-17.7 14.3-32 32-32zM448 96c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V128c0-17.7 14.3-32 32-32zM352 224V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V224c0-17.7 14.3-32 32-32s32 14.3 32 32zM192 288c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V320c0-17.7 14.3-32 32-32zM96 416v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V416c0-17.7 14.3-32 32-32s32 14.3 32 32z"></path></svg></td>
<td headers="name" class="gt_row gt_left gt_striped" style="font-weight: bold;">IFIDE</td>
<td headers="value" class="gt_row gt_center gt_striped">
<?xml version='1.0' encoding='UTF-8' ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="141.73pt" height="34.02pt" viewbox="0 0 141.73 34.02"><g class="svglite"><defs><style type="text/css"><![CDATA[    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  ]]></style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg=="><rect x="0.00" y="0.00" width="141.73" height="34.02"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg==)"><rect x="0.00" y="0.00" width="141.73" height="34.02" style="stroke-width: 0.00; stroke: none;"></rect></g><defs><clippath id="cpMS4wMHwxNDAuNzR8MS4wMHwyMi42Mw=="><rect x="1.00" y="1.00" width="139.74" height="21.63"></rect></clippath></defs><g clip-path="url(#cpMS4wMHwxNDAuNzR8MS4wMHwyMi42Mw==)"><rect x="7.35" y="21.91" width="3.43" height="0.72" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="10.78" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="14.21" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="17.65" y="21.18" width="3.43" height="1.44" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="21.08" y="19.74" width="3.43" height="2.88" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="24.52" y="21.91" width="3.43" height="0.72" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="27.95" y="18.30" width="3.43" height="4.33" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="31.38" y="19.02" width="3.43" height="3.61" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="34.82" y="16.86" width="3.43" height="5.77" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="38.25" y="14.70" width="3.43" height="7.93" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="41.68" y="1.00" width="3.43" height="21.63" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="45.12" y="8.21" width="3.43" height="14.42" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="48.55" y="19.74" width="3.43" height="2.88" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="51.98" y="20.46" width="3.43" height="2.16" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="55.42" y="20.46" width="3.43" height="2.16" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="58.85" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="62.28" y="21.18" width="3.43" height="1.44" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="65.72" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="69.15" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="72.58" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="76.02" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="79.45" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="82.88" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="86.32" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="89.75" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="93.18" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="96.62" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="100.05" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="103.48" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="106.92" y="21.91" width="3.43" height="0.72" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="110.35" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="113.78" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="117.22" y="21.91" width="3.43" height="0.72" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="120.65" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="124.08" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="127.52" y="22.63" width="3.43" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="130.95" y="21.91" width="3.43" height="0.72" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><circle cx="8.44" cy="21.91" r="0.46" style="stroke-width: 0.71; stroke: none;"></circle><circle cx="8.44" cy="21.91" r="0.46" style="stroke-width: 0.71; stroke: none;"></circle><line x1="43.04" y1="22.63" x2="43.04" y2="1.00" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g><g clip-path="url(#cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg==)"><polyline points="1.00,22.63 140.74,22.63 " style="stroke-width: 0.75;"></polyline><polyline points="9.67,25.46 9.67,22.63 " style="stroke-width: 0.75;"></polyline><polyline points="132.42,25.46 132.42,22.63 " style="stroke-width: 0.75;"></polyline><text x="9.67" y="33.56" text-anchor="middle" style='font-size: 6.00px; font-family: "Arial";' textlength="20.06px" lengthadjust="spacingAndGlyphs">26 auto</text><text x="132.42" y="33.56" text-anchor="middle" style='font-size: 6.00px; font-family: "Arial";' textlength="20.06px" lengthadjust="spacingAndGlyphs">73 auto</text></g></g></svg>
</td>
<td headers="n_missing" class="gt_row gt_right gt_striped">1.0%</td>
<td headers="Mean" class="gt_row gt_right gt_striped">39.4</td>
<td headers="Median" class="gt_row gt_right gt_striped">39.2</td>
<td headers="SD" class="gt_row gt_right gt_striped">6.2</td>
</tr>
<tr>
<td headers="type" class="gt_row gt_left"><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:20px;width:25px;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#f18e2c;overflow:visible;position:relative;"><path d="M576 0c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V32c0-17.7 14.3-32 32-32zM448 96c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V128c0-17.7 14.3-32 32-32zM352 224V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V224c0-17.7 14.3-32 32-32s32 14.3 32 32zM192 288c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V320c0-17.7 14.3-32 32-32zM96 416v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V416c0-17.7 14.3-32 32-32s32 14.3 32 32z"></path></svg></td>
<td headers="name" class="gt_row gt_left" style="font-weight: bold;">IDIG</td>
<td headers="value" class="gt_row gt_center">
<?xml version='1.0' encoding='UTF-8' ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="141.73pt" height="34.02pt" viewbox="0 0 141.73 34.02"><g class="svglite"><defs><style type="text/css"><![CDATA[    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  ]]></style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg=="><rect x="0.00" y="0.00" width="141.73" height="34.02"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg==)"><rect x="0.00" y="0.00" width="141.73" height="34.02" style="stroke-width: 0.00; stroke: none;"></rect></g><defs><clippath id="cpMS4wMHwxNDAuNzR8MS4wMHwyMi42Mw=="><rect x="1.00" y="1.00" width="139.74" height="21.63"></rect></clippath></defs><g clip-path="url(#cpMS4wMHwxNDAuNzR8MS4wMHwyMi42Mw==)"><rect x="7.35" y="19.30" width="11.55" height="3.33" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="18.90" y="5.16" width="11.55" height="17.47" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="30.45" y="8.48" width="11.55" height="14.14" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="41.99" y="1.00" width="11.55" height="21.63" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="53.54" y="7.65" width="11.55" height="14.97" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="65.09" y="13.48" width="11.55" height="9.15" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="76.64" y="20.13" width="11.55" height="2.50" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="88.19" y="20.96" width="11.55" height="1.66" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="99.74" y="22.63" width="11.55" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="111.29" y="22.63" width="11.55" height="0.00" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><rect x="122.84" y="20.96" width="11.55" height="1.66" style="stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt; stroke-linejoin: miter; fill: #F8BB87;"></rect><circle cx="13.12" cy="21.79" r="0.46" style="stroke-width: 0.71; stroke: none;"></circle><circle cx="13.12" cy="21.79" r="0.46" style="stroke-width: 0.71; stroke: none;"></circle><line x1="45.46" y1="22.63" x2="45.46" y2="1.00" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g><g clip-path="url(#cpMC4wMHwxNDEuNzN8MC4wMHwzNC4wMg==)"><polyline points="1.00,22.63 140.74,22.63 " style="stroke-width: 0.75;"></polyline><polyline points="14.29,25.46 14.29,22.63 " style="stroke-width: 0.75;"></polyline><polyline points="130.87,25.46 130.87,22.63 " style="stroke-width: 0.75;"></polyline><text x="14.29" y="33.56" text-anchor="middle" style='font-size: 6.00px; font-family: "Arial";' textlength="28.41px" lengthadjust="spacingAndGlyphs">601 mauto</text><text x="130.87" y="33.56" text-anchor="middle" style='font-size: 6.00px; font-family: "Arial";' textlength="20.06px" lengthadjust="spacingAndGlyphs">61 auto</text></g></g></svg>
</td>
<td headers="n_missing" class="gt_row gt_right">0.0%</td>
<td headers="Mean" class="gt_row gt_right">18.2</td>
<td headers="Median" class="gt_row gt_right">16.7</td>
<td headers="SD" class="gt_row gt_right">10.9</td>
</tr>
</tbody>
</table></div>
</div>
<p>Básicamente, en el código anterior se han almacenado los datos de la hoja de cálculo en el <em>data frame</em> “interestelar_100”. Luego, se ha creado un nuevo <em>data frame</em> más reducido con las únicas variables del análisis que vamos a realizar (IDIVERSE, IFIDE e IDIG), al que hemos llamado “seleccion”. Estas tres variables han sido exploradas a traves de una tabla gráfica a partir de la función <code><a href="https://jthomasmock.github.io/gtExtras/reference/gt_plt_summary.html">gt_plt_summary()</a></code> del paquete <a href="https://github.com/jthomasmock/gtExtras">gtExtras</a>.</p>
<p>El siguiente paso será localizar los posibles <strong><em>missing values</em></strong>, ya que para obtener componentes principales es necesario que todos los casos posean dato para todas las variables del análisis. Para tener una idea general, se puede utilizar la función <code><a href="https://docs.ropensci.org/visdat/reference/vis_miss.html">vis_miss()</a></code> del paquete <a href="https://docs.ropensci.org/visdat/">visdat</a>, que localizará gráficamente los <em>missing values</em> de las diferentes variables, y calculará el porcentaje de casos que supone, con respecto al total de observaciones:</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Localizando missing values.</span></span>
<span><span class="va">seleccion</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/visdat/reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Indicadores: Diversificación, Fidelidad, Digitalización"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Transporte de mercancías interestelar"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Observación"</span>,</span>
<span>       fill <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TRUE"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"FALSE"</span> <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TRUE"</span> <span class="op">=</span> <span class="st">"NA"</span>, <span class="st">"FALSE"</span> <span class="op">=</span> <span class="st">"Presente"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-181-1.png" width="672"></div>
<p>Del gráfico anterior se desprende que existen 2 <em>missing values</em> repartidos en 2 de las 3 variables del estudio. Para localizarlos, podemos filtrar nuestro <em>data frame</em> con las herramientas de <a href="https://dplyr.tidyverse.org">dplyr</a>:</p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">seleccion</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">IDIVERSE</span><span class="op">)</span> <span class="op">|</span></span>
<span>                     <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">IFIDE</span><span class="op">)</span> <span class="op">|</span></span>
<span>                     <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">IDIG</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">IDIVERSE</span>, <span class="va">IFIDE</span>, <span class="va">IDIG</span><span class="op">)</span></span></code></pre></div>
<pre><code>##                      IDIVERSE    IFIDE     IDIG
## ezra bridger haulage       NA 34.11209 29.06697
## alderaan freight     35.96067       NA 19.10291</code></pre>
<p>Los casos con datos faltantes son las empresas <em>Ezra Bridger Haulage</em> y <em>Alderaan Freight</em>.</p>
<p>Ante la existencia de <em>missing values</em>, se puede actuar de varios modos. Por ejemplo, <strong>se puede intentar obtener por otro canal de información el conjunto de valores</strong> que no están disponibles, <strong>o recurrir a alguna estimación</strong>. En caso de que esto sea difícil, se puede optar, simplemente, por <strong>eliminar</strong> estos casos, en especial cuando representan un porcentaje muy reducido respecto al total de casos. En nuestro ejemplo, supondremos que hemos optado por esta última vía, y eliminaremos estos casos con el código:</p>
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">seleccion</span> <span class="op">&lt;-</span> <span class="va">seleccion</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>             <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">IDIVERSE</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>                    <span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">IFIDE</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>                    <span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">IDIG</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Verificamos en el <em>Global Environment</em> que el <em>data frame</em> “seleccion” ha pasado a tener 102 casos.</p>
<p>Por otro lado, la técnica de componentes principales <strong>es muy sensible a la existencia de <em>outliers</em></strong>. En consecuencia, deberán ser identificados y, en su caso, eliminados. Para realizar este proceso, y dado que en nuestro análisis contamos con 4 variables, primero “resumiremos” el valor que toman dichas variables para cada observación (empresa), mediante el cálculo de la <em>distancia de Mahalanobis</em>. De hecho, las distancias de los diferentes casos se almacenarán en una nueva columna o variable de nuestro <em>data frame,</em> a la que llamaremos MAHALANOBIS:</p>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Identificando y descartando outliers con distancia de Mahalanobis.</span></span>
<span><span class="va">seleccion</span> <span class="op">&lt;-</span> <span class="va">seleccion</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>MAHALANOBIS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/mahalanobis.html">mahalanobis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>,</span>
<span>                                   center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">colMeans</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>,</span>
<span>                                   cov    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cov</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Dentro de los argumentos de la función <code>mahalanobis</code> incluida en la función <code>mutate</code> hay unos puntos entre paréntesis. Recordemos que estos puntos deben ser añadidos cuando una función no es la primera del operador “<em>pipe</em>” (<code>%&gt;%</code>), para indicar que las variables de los paréntesis hacen referencia al <em>data frame</em> “seleccion” (o, en general, el objeto que fluye a través del “<em>pipe</em>”).</p>
<p>A continuación, hemos construido un <em>box-plot</em> o diagrama de caja de la variable MAHALANOBIS, como si fuera cualquier otra variable, a partir de la función <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> del paquete <a href="https://ggplot2.tidyverse.org">ggplot2</a>:</p>
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">seleccion</span>, map <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">MAHALANOBIS</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"DISTANCIA DE MAHALANOBIS"</span>,</span>
<span>          subtitle <span class="op">=</span> <span class="st">"IDIVERSE, IFIDE, IDIG. Empresas TMI."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"MAHALANOBIS"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-185-1.png" width="672"></div>
<p>En el gráfico se observa que existen, por encima de la caja, varios <em>outliers</em>. Para identificarlos de modo concreto, hemos de calcular los cuartiles primero y tercero de la variable MAHALANOBIS y pasar el correspondiente filtro:</p>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Q1M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span> <span class="op">(</span><span class="va">seleccion</span><span class="op">$</span><span class="va">MAHALANOBIS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">Q3M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span> <span class="op">(</span><span class="va">seleccion</span><span class="op">$</span><span class="va">MAHALANOBIS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.75</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">seleccion</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span> <span class="op">&gt;</span> <span class="va">Q3M</span> <span class="op">+</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span> <span class="op">|</span></span>
<span>           <span class="va">MAHALANOBIS</span> <span class="op">&lt;</span> <span class="va">Q1M</span> <span class="op">-</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span>, <span class="va">IDIVERSE</span>, <span class="va">IFIDE</span>, <span class="va">IDIG</span><span class="op">)</span> </span></code></pre></div>
<pre><code>##                             MAHALANOBIS   IDIVERSE    IFIDE       IDIG
## hyperion star haulage          5.212257 11.7150226 26.44375 13.7407440
## jovian logistics               6.337391 22.3920052 29.77401 27.4342295
## ripley interstellar freight   25.147548 71.3507415 40.12974  4.4464628
## chakotay cargo systems        16.548312 54.3681496 64.26013 42.7197240
## io star transport              7.380454 38.0206319 33.82858 35.1177708
## hal intergalactic freight      7.174817  7.4887170 31.61145 28.1566284
## andromeda cargo                6.445906 46.0541586 44.98949 44.3415811
## kyber crystal shipping         8.476561 22.6273372 30.97667 34.0135033
## tannhäuser freight             7.869429 47.8884591 42.64052  8.2092915
## hyperdrive express            24.045602 35.7898130 68.14784 33.6619031
## home one cargo                20.784784 22.1760155 46.77635 60.8325142
## arrakis freight               34.687429 38.8813669 73.30230 58.5101128
## kobol cargo systems            5.449331  0.7736944 39.46283  0.6007237</code></pre>
<p>Son 13 las compañías que se comportan como outliers, considerando conjuntamente las tres variables (a través de la distancia de Mahalanobis). La eliminación de estos casos puede realizarse fácilmente con el código:</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creando nuevo df sin outliers.</span></span>
<span><span class="va">seleccion_so</span> <span class="op">&lt;-</span> <span class="va">seleccion</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span> <span class="op">&lt;=</span> <span class="va">Q3M</span> <span class="op">+</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>           <span class="va">MAHALANOBIS</span> <span class="op">&gt;=</span> <span class="va">Q1M</span> <span class="op">-</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Eliminando variable MAHALANOBIS de los df</span></span>
<span><span class="va">seleccion</span>    <span class="op">&lt;-</span> <span class="va">seleccion</span>    <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">MAHALANOBIS</span><span class="op">)</span></span>
<span><span class="va">seleccion_so</span> <span class="op">&lt;-</span> <span class="va">seleccion_so</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">MAHALANOBIS</span><span class="op">)</span></span></code></pre></div>
<p>Se ha creado un nuevo <em>data frame</em> llamado seleccion_so” con los casos (89) que <strong>no</strong> son <em>outliers</em> (y que no contienen <em>missing values</em>), y se ha eliminado la variable MAHALANOBIS, puesto que su única utilidad era la de localizar y filtrar los <em>outliers</em>. Con este <em>data frame</em> “seleccion_so” es con el que se procederá al cálculo de las componentes.</p>
</div>
<div id="cálculo-de-componentes." class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> <img src="figuras/pie-chart.svg" class="hicon"> Cálculo de componentes.<a class="anchor" aria-label="anchor" href="#c%C3%A1lculo-de-componentes."><i class="fas fa-link"></i></a>
</h2>
<p>La <strong>condición previa</strong> para el <strong>cálculo de componentes</strong> es que las variables originales del análisis contengan información redundante, es decir, que en buena medida aporten una “misma información” sobre los casos (empresas). Esto se verifica con la existencia de altas correlaciones entre las variables (al menos, entre algunas de ellas). Por tanto, hemos de calcular la matriz de correlaciones correspondiente. Un modo gráfico visualmente efectivo es utilizar las posibilidades que nos ofrece el paquete <a href="https://ggobi.github.io/ggally/">GGally</a> mediante la función <code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs()</a></code>:</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Correlaciones.</span></span>
<span><span class="va">corr_plot_so</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs</a></span><span class="op">(</span><span class="va">seleccion_so</span>, </span>
<span>                        lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>continuous <span class="op">=</span> <span class="fu"><a href="https://ggobi.github.io/ggally/reference/wrap.html">wrap</a></span><span class="op">(</span><span class="st">"cor"</span>,</span>
<span>                                                       size <span class="op">=</span> <span class="fl">4.5</span>,</span>
<span>                                                       method <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>                                                       stars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        title <span class="op">=</span> <span class="st">"Matriz de Correlación (sin outliers)."</span><span class="op">)</span></span>
<span><span class="va">corr_plot_so</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-188-1.png" width="672"></div>
<p>Puede apreciarse cómo existen altas correlaciones (en valor absoluto) entre todas las variables. Por tanto, tiene sentido hacer un análisis de componentes principales, ya que hay variables que parecen <strong>compartir información</strong>.</p>
<p>La obtención de las componentes se va a realizar mediante la función <code><a href="https://rdrr.io/r/stats/prcomp.html">prcomp()</a></code> del paquete <code>{stats}</code>, que es un paquete cargado por defecto al abrir R. Es conveniente que activemos el argumento <code>scale =</code> con “T” (<em>true</em>) para que las variables originales sean consideradas en sus <strong>versiones tipificadas</strong>. Vamos a asignar los resultados a un objeto de nombre, por ejemplo, “componentes”. Por último, guardaremos el <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> o resumen de los resultados con un nombre provisional, por ejemplo, “temporal”. El código es el siguiente:</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtencion de componentes.</span></span>
<span><span class="va">componentes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/prcomp.html">prcomp</a></span> <span class="op">(</span><span class="va">seleccion_so</span>, scale<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">temporal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span> <span class="op">(</span><span class="va">componentes</span><span class="op">)</span></span>
<span><span class="va">temporal</span></span></code></pre></div>
<pre><code>## Importance of components:
##                           PC1    PC2    PC3
## Standard deviation     1.4614 0.7261 0.5807
## Proportion of Variance 0.7119 0.1757 0.1124
## Cumulative Proportion  0.7119 0.8876 1.0000</code></pre>
<p>La “<em>Standard deviation</em>” es la raíz cuadrada de los autovalores asociados a cada componente. “<em>Proportion of Variance</em>” nos dice la proporción de la suma de varianzas de las variables originales (<em>comunalidad</em>) recogida por cada componente, proporción que se acumula en “<em>Cumulative Proportion</em>”. Nótese que las componentes aparecen ordenadas de más a menos importantes en función de la cantidad de varianza que capturan.</p>
<p>En este caso, de la tabla anterior podemos destacar que la primera componente recoge más del 71% de la varianza (<em>comunalidad</em>) o información puesta en juego globalmente por las tres variables originales. Las dos primeras componentes, en conjunto, aglutinan casi el 89% de la información de las tres variables ofrecen sobre el comportamiento de las empresas. Entre las tres componentes, lógicamente se recoge el 100% de la <em>comunalidad</em> o varianza global.</p>
<p>Si el elemento “importance” del <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> o resumen “temporal” lo convertimos en un <em>data frame</em>, por ejemplo “summary_df”, podremos presentar los resultados por medio de una tabla estéticamente más atractiva, a partir de la función <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable()</a></code> del paquete <a href="https://yihui.org/knitr/">knitr</a>, y las funciones complementarias del paquete <a href="http://haozhu233.github.io/kableExtra/">kableExtra</a>:</p>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convertir el resumen en un data frame</span></span>
<span><span class="va">summary_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">temporal</span><span class="op">$</span><span class="va">importance</span><span class="op">)</span></span>
<span><span class="va">summary_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">)</span>  <span class="co"># Transponer para mejor visualización</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span> <span class="op">(</span><span class="va">temporal</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Crear la tabla con kable y personalizarla con kableExtra</span></span>
<span><span class="va">summary_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Resumen de Componentes"</span>,</span>
<span>        col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Componente"</span>, </span>
<span>                      <span class="st">"Desv. típica"</span>,</span>
<span>                      <span class="st">"Proporción de varianza (comunalidad)"</span>,</span>
<span>                      <span class="st">"Proporción de varianza (comunalidad) acumulada"</span><span class="op">)</span>,</span>
<span>        digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>        format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">"."</span>, scientific <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"bordered"</span>, <span class="st">"condensed"</span><span class="op">)</span>,</span>
<span>                full_width <span class="op">=</span> <span class="cn">F</span>, </span>
<span>                position <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold<span class="op">=</span> <span class="cn">T</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">)</span><span class="op">)</span>, bold<span class="op">=</span> <span class="cn">F</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>, extra_css <span class="op">=</span> <span class="st">"text-align: center;"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-striped table-bordered table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-191">Table 6.1: </span><span id="tab:unnamed-chunk-191">Table 6.2: </span>Resumen de Componentes
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;text-align: center;">
Componente
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Desv. típica
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Proporción de varianza (comunalidad)
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Proporción de varianza (comunalidad) acumulada
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: center;">
PC1
</td>
<td style="text-align:right;text-align: center;">
1.46
</td>
<td style="text-align:right;text-align: center;">
0.71
</td>
<td style="text-align:right;text-align: center;">
0.71
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: center;">
PC2
</td>
<td style="text-align:right;text-align: center;">
0.73
</td>
<td style="text-align:right;text-align: center;">
0.18
</td>
<td style="text-align:right;text-align: center;">
0.89
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: center;">
PC3
</td>
<td style="text-align:right;text-align: center;">
0.58
</td>
<td style="text-align:right;text-align: center;">
0.11
</td>
<td style="text-align:right;text-align: center;">
1.00
</td>
</tr>
</tbody>
</table></div>
<p>Los coeficientes o <strong>cargas</strong> de cada componente se obtienen pidiendo a nuestro objeto “componentes” el elemento “rotation”. Estas cargas las vamos a guardar en un nuevo objeto que llamaremos, por ejemplo, “cargas”, que presentaremos mediante una pequeña tabla diseñada con la función <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable()</a></code> del paquete <a href="https://yihui.org/knitr/">knitr</a> y otras funciones del paquete <a href="http://haozhu233.github.io/kableExtra/">kableExtra</a>:</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cargas de cada componente.</span></span>
<span><span class="va">cargas</span> <span class="op">&lt;-</span> <span class="va">componentes</span><span class="op">$</span><span class="va">rotation</span></span>
<span><span class="va">cargas</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Cargas de las componentes obtenidas"</span>,</span>
<span>        digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>        format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">"."</span>, scientific <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"bordered"</span>, <span class="st">"condensed"</span><span class="op">)</span>,</span>
<span>                position <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold<span class="op">=</span> <span class="cn">T</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">cargas</span><span class="op">)</span><span class="op">)</span>, bold<span class="op">=</span> <span class="cn">F</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>, extra_css <span class="op">=</span> <span class="st">"text-align: left;"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-striped table-bordered table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-193">Table 6.3: </span><span id="tab:unnamed-chunk-193">Table 6.4: </span>Cargas de las componentes obtenidas
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;text-align: center;">
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
PC1
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
PC2
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
PC3
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
IDIVERSE
</td>
<td style="text-align:right;text-align: center;">
0.601
</td>
<td style="text-align:right;text-align: center;">
0.273
</td>
<td style="text-align:right;text-align: center;">
0.752
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
IFIDE
</td>
<td style="text-align:right;text-align: center;">
0.544
</td>
<td style="text-align:right;text-align: center;">
-0.828
</td>
<td style="text-align:right;text-align: center;">
-0.135
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
IDIG
</td>
<td style="text-align:right;text-align: center;">
0.586
</td>
<td style="text-align:right;text-align: center;">
0.490
</td>
<td style="text-align:right;text-align: center;">
-0.646
</td>
</tr>
</tbody>
</table></div>
<p>En la tabla, se muestran las cargas (<em>loads</em>), que son los coeficientes que intervienen en las combinaciones lineales que definen cada componente, a partir de las variables originales (tipificadas). Por tanto, con base en las cargas se pueden explicitar las ecuaciones correspondientes a cada componente. Por ejemplo, para la primera componente, la ecuación será:</p>
<p><span class="math display">\[
\text{CP}_{i1} = 0.6006 \cdot \text{IDIVERSE}_{i1} + 0.5442 \cdot \text{IFIDE}_{i1} + 0.5858 \cdot \text{IDIG}_{i1}
\]</span> Puede apreciarse que, en cuanto a la primera componente, que es la que especialmente nos interesa como “indicador” de la “preparación de las diferentes compañías de transporte para afrontar el futuro” en el caso de las empresas de transporte interestelar de mercancías, las 3 cargas tienen signo positivo, lo que implica que, cuanto mayores sean los valores de una empresa en las variables <strong>IDIVERSE</strong> (índice de diversificación), <strong>IFIDE</strong> (índice de fidelidad) e <strong>IDIG</strong> (índice de digitalización), mayor será el valor del indicador y, por tanto, su preparación. Además, como las variables fueron tipificadas, los valores de las cargas son comparables. De este modo, vemos cómo, dentro de la primera componente, que es la que adoptamos como indicador, la mayor importancia la tiene <strong>IDIVERSE</strong>, seguido de <strong>IDIG</strong> y, por último, <strong>IFIDE</strong>.</p>
</div>
<div id="retención-de-componentes." class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> <img src="figuras/pie-chart.svg" class="hicon"> Retención de componentes.<a class="anchor" aria-label="anchor" href="#retenci%C3%B3n-de-componentes."><i class="fas fa-link"></i></a>
</h2>
<p>La etapa de retención de componentes consiste en decidir cuántas de las componentes generadas (recordemos que, en un principio, se calculan tantas componentes como variable originales) consideramos que resumen de un modo aceptable la información contenida en las variables originales. Estas <strong>componentes “retenidas” se convertirán en las componentes principales</strong>.</p>
<p>La primera componente siempre es retenida y, por tanto, es una “componente principal”. El resto, que van capturando proporciones cada vez menores de la varianza común de las variables originales (<em>comunalidad</em>), podrán o no retenerse; aunque, siempre, la retención de una componente implica que se han retenido todas las anteriores. En este caso práctico, buscamos un único indicador de la “preparación de las diferentes compañías de transporte para afrontar el futuro”, por lo que solo vamos a “retener” la primera componente. En otras aplicaciones, podría ser necesario retener todas las componentes que sean adecuadas para recoger la suficiente comunalidad.</p>
<p>Hay varios procedimientos o criterios para tomar la decisión de cuántas componentes retener. Uno de ellos, comúnmente aplicado, es el de <strong>retener aquellas componentes cuyo autovalor es mayor que 1</strong> (suponiendo que se ha trabajado con las variables en sus versiones tipificadas). Los autovalores son el cuadrado de los elementos “Desviación típica” (valores “Standard deviation” (sdev) del objeto “componentes” que hemos generado a partir de la función <code><a href="https://rdrr.io/r/stats/prcomp.html">prcomp()</a></code>).</p>
<p>Hemos creado un <em>data frame</em> con estos autovalores calculados (y su orden de importancia, al que hemos llamado variable o columna “orden”, y que es un vector de números enteros consecutivos que va desde uno hasta número de variables originales o de componentes) y los hemos dispuesto en un gráfico de barras:</p>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Determinacion Componentes a retener.</span></span>
<span><span class="co"># Criterio del Autovalor mayor que 1.</span></span>
<span><span class="va">orden</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">seleccion_so</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">autovalor</span> <span class="op">&lt;-</span> <span class="va">componentes</span><span class="op">$</span><span class="va">sdev</span><span class="op">^</span><span class="fl">2</span></span>
<span><span class="va">autovalores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">orden</span>, <span class="va">autovalor</span><span class="op">)</span></span>
<span></span>
<span><span class="va">autograph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">autovalores</span>, map <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">orden</span>,</span>
<span>                                                   y <span class="op">=</span> <span class="va">autovalor</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>                      colour <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>                      fill <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>                      alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                        colour <span class="op">=</span> <span class="st">"dark blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">autovalor</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       vjust <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                       colour <span class="op">=</span> <span class="st">"dark blue"</span>,</span>
<span>                       size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"AUTOVALORES DE LAS COMPONENTES"</span>,</span>
<span>                     subtitle <span class="op">=</span> <span class="st">"Empresas TMI"</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span> <span class="op">(</span><span class="st">"Número de componente"</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Autovalor"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">autograph</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-194-1.png" width="672"></div>
<p>Respecto al gráfico, conviene recordar que, al ser un de barras, si no se quieren representar las frecuencias sino los valores que toma una variable (en este caso, “autovalor”) para cada valor de la otra variable (en este caso, “orden”); en el <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> habrá que añadir el argumento <code>stat =</code> con el valor “identity”. Además, se utiliza el elemento <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous()</a></code> para pesonalizar la escala del eje x, y que se divida dicho eje en tantos tramos como componentes hay.</p>
<p>En el gráfico obtenido se advierte que Las componentes cuyas barras atraviesan esta línea son las que deberían ser retenidas, ya que son el menor número de componentes que resumen de modo suficiente la información ofrecida sobre el comportamiento de los casos por las variables originales. En este caso, basta con retener solo la primera componente (por lo tanto, solo contamos con una <strong>componente principal</strong>). Este es un resultado favorable cara a nuestro propósito, ya que nos dice que podemos usar como indicador solo una componente, la primera. y con ella resumiremos suficientemente a las tres variables originales. Por tanto, es un buen indicador, en ese sentido.</p>
<p>Un gráfico complementario útil es el que muestra, para cada componente, el porcentaje de varianza total (comunalidad) acumulada al ir reteniendo las sucesivas componentes, un resultado que ya se obtuvo anteriormente en forma de tabla:</p>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Comunalidad acumulada.</span></span>
<span><span class="va">autovalores</span> <span class="op">&lt;-</span> <span class="va">autovalores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>variacum <span class="op">=</span> <span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="op">(</span><span class="va">autovalor</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">checkcp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">$</span><span class="va">autovalor</span> <span class="op">&gt;=</span> <span class="fl">1</span>, <span class="st">"CP"</span>, <span class="st">"NCP"</span><span class="op">)</span></span>
<span><span class="va">checkcp</span></span></code></pre></div>
<pre><code>## [1] "CP"  "NCP" "NCP"</code></pre>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vacumgraph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">autovalores</span>, map <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">orden</span>,</span>
<span>                                                    y <span class="op">=</span> <span class="va">variacum</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>                       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">checkcp</span><span class="op">)</span>,</span>
<span>                       colour <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>                       alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">variacum</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        vjust <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                        colour <span class="op">=</span> <span class="st">"dark blue"</span>,</span>
<span>                        size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"COMUNALIDAD ACUMULADA POR COMPONENTES"</span>,</span>
<span>                      subtitle <span class="op">=</span> <span class="st">"Empresas TMI"</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span> <span class="op">(</span><span class="st">"Número de componente"</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Varianza acumulada"</span><span class="op">)</span></span>
<span><span class="va">vacumgraph</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-195-1.png" width="672"></div>
<p>Para obtener el gráfico anterior, se comienza añadiendo al <em>data frame</em> “autovalores” una columna o variable que es la <em>suma acumulada del porcentaje de comunalidad</em> recogido por las sucesivas componentes, que están ordenadas de mayor a menor autovalor. Para calcular el porcentaje, se usa la función <code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code>, y se tiene en cuenta que, como las variables fueron tipificadas para calcular las componentes, la <em>comunalidad</em>, que coincide con la suma de las varianzas de las componentes (autovalores), es igual al número de variables o componentes (valor que toma la función <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code>).</p>
<p>Después, se ha creado un vector que contiene tantos elementos como variables o componentes hay en el análisis (vector “checkcp”). Con la función condicional <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> se consigue que los elementos de “checkcp” sean “CP” o “NCP” según los correspondientes autovalores sean mayores o no que 1. Finalmente, según sea el valor de cada elemento de “checkcp”, las barras del gráfico se colorearán de uno u otro modo.</p>
<p>Posteriormente, mediante el paquete <a href="https://patchwork.data-imaginist.com">patchwork</a>, se han unido los dos gráficos creados en esta fase, poniendo uno debajo del otro:</p>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combinado</span> <span class="op">&lt;-</span> <span class="va">autograph</span> <span class="op">/</span> <span class="va">vacumgraph</span></span>
<span><span class="va">combinado</span> <span class="op">&lt;-</span> <span class="va">combinado</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_annotation.html">plot_annotation</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Retención de componentes (Autovalor &gt;1)"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Empresas TMI (sin outliers)"</span>,</span>
<span>    theme <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>      <span class="co"># TÍTULO de la composición</span></span>
<span>      plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span></span>
<span>        size <span class="op">=</span> <span class="fl">16</span>,          <span class="co"># tamaño</span></span>
<span>        face <span class="op">=</span> <span class="st">"bold"</span>,      <span class="co"># negrita</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="co"># SUBTÍTULO de la composición</span></span>
<span>      plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span></span>
<span>        size <span class="op">=</span> <span class="fl">12</span></span>
<span>      <span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">combinado</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-196-1.png" width="672"></div>
<p>Un a vez confirmado el hecho de que la primera componente es suficiente para contar con un buen indicador de “preparación de las diferentes compañías de transporte para afrontar el futuro”, considerando los aspectos de digitalización, diversificación, y fidelización de clientes, pasaremos a estudiar qué casos concretos ofrecen mejores (mayores) valores en el indicador, para lo cual hemos de calcular sus puntuaciones.</p>
</div>
<div id="puntuaciones-de-los-casos-scores." class="section level2" number="6.7">
<h2>
<span class="header-section-number">6.7</span> <img src="figuras/pie-chart.svg" class="hicon"> Puntuaciones de los casos (scores).<a class="anchor" aria-label="anchor" href="#puntuaciones-de-los-casos-scores."><i class="fas fa-link"></i></a>
</h2>
<p>Para obtener las puntuaciones de cada caso (empresa) en el indicador de “preparación de las diferentes compañías de transporte para afrontar el futuro” (y que es nuestra componente principal, que a su vez coincide con la primera componente), simplemente debemos tener en cuenta que tales puntuaciones están guardadas en la matriz “x” del objeto <code><a href="https://rdrr.io/r/stats/prcomp.html">prcomp()</a></code> creado. Vamos a renombrar a las primera columna (componente) de esta matriz como “scores” y vamos a recolocar las filas (empresas) de mayor a menor valor de la puntuación (lo que se consigue mediante la función <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> del paquete <a href="https://dplyr.tidyverse.org">dplyr</a>. Finalmente, mostraremos en una tabla el <em>ranking</em> de las 10 mejores empresas (según sus puntuaciones en el indicador), “cortando” el <em>data frame</em> con la función <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code>:</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Puntuaciones o Scores</span></span>
<span><span class="va">scores</span> <span class="op">&lt;-</span> <span class="va">componentes</span><span class="op">$</span><span class="va">x</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>  <span class="co">#tantas columnas como componentes retenidas</span></span>
<span><span class="va">scores_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span></span>
<span><span class="va">scores_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">scores_df</span>,<span class="va">seleccion_so</span><span class="op">)</span></span>
<span><span class="va">scores_top10</span> <span class="op">&lt;-</span> <span class="va">scores_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scores_top10</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Puntuaciones emporesas TMI (Top-10, sin outliers)"</span>,</span>
<span>        col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Empresa"</span>,</span>
<span>                      <span class="st">"Puntuación"</span>,</span>
<span>                      <span class="st">"I. Diversif."</span>,</span>
<span>                      <span class="st">"I. Fidelizac."</span>,</span>
<span>                      <span class="st">"I. Digitalizac."</span><span class="op">)</span>,</span>
<span>        digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>        format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">"."</span>,</span>
<span>                           scientific <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                bootstrap_options <span class="op">=</span> <span class="st">"striped"</span>,</span>
<span>                                    <span class="st">"bordered"</span>,</span>
<span>                                    <span class="st">"condensed"</span>,</span>
<span>                position <span class="op">=</span> <span class="st">"center"</span>,</span>
<span>                font_size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold<span class="op">=</span> <span class="cn">T</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">scores_top10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           bold<span class="op">=</span> <span class="cn">F</span>,</span>
<span>           align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>              extra_css <span class="op">=</span> <span class="st">"text-align: left;"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-striped" style="font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-198">Table 6.5: </span><span id="tab:unnamed-chunk-198">Table 6.6: </span>Puntuaciones emporesas TMI (Top-10, sin outliers)
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;text-align: center;">
Empresa
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Puntuación
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
I. Diversif.
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
I. Fidelizac.
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
I. Digitalizac.
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
shuttlepod movers
</td>
<td style="text-align:right;text-align: center;">
2.662
</td>
<td style="text-align:right;text-align: center;">
40.677
</td>
<td style="text-align:right;text-align: center;">
43.071
</td>
<td style="text-align:right;text-align: center;">
28.098
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
kamino movers
</td>
<td style="text-align:right;text-align: center;">
2.550
</td>
<td style="text-align:right;text-align: center;">
26.602
</td>
<td style="text-align:right;text-align: center;">
44.526
</td>
<td style="text-align:right;text-align: center;">
32.715
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
icarus star transport
</td>
<td style="text-align:right;text-align: center;">
2.447
</td>
<td style="text-align:right;text-align: center;">
35.055
</td>
<td style="text-align:right;text-align: center;">
41.709
</td>
<td style="text-align:right;text-align: center;">
32.762
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
mirror universe cargo
</td>
<td style="text-align:right;text-align: center;">
2.407
</td>
<td style="text-align:right;text-align: center;">
43.021
</td>
<td style="text-align:right;text-align: center;">
41.104
</td>
<td style="text-align:right;text-align: center;">
28.170
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
sith transport corp.
</td>
<td style="text-align:right;text-align: center;">
2.326
</td>
<td style="text-align:right;text-align: center;">
33.559
</td>
<td style="text-align:right;text-align: center;">
41.863
</td>
<td style="text-align:right;text-align: center;">
31.774
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
hoth haulage
</td>
<td style="text-align:right;text-align: center;">
2.263
</td>
<td style="text-align:right;text-align: center;">
46.547
</td>
<td style="text-align:right;text-align: center;">
42.946
</td>
<td style="text-align:right;text-align: center;">
18.875
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
adama transport
</td>
<td style="text-align:right;text-align: center;">
2.251
</td>
<td style="text-align:right;text-align: center;">
42.547
</td>
<td style="text-align:right;text-align: center;">
40.666
</td>
<td style="text-align:right;text-align: center;">
27.549
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
star gate logistics
</td>
<td style="text-align:right;text-align: center;">
1.982
</td>
<td style="text-align:right;text-align: center;">
40.135
</td>
<td style="text-align:right;text-align: center;">
40.740
</td>
<td style="text-align:right;text-align: center;">
25.417
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
assimilator haulage
</td>
<td style="text-align:right;text-align: center;">
1.942
</td>
<td style="text-align:right;text-align: center;">
23.746
</td>
<td style="text-align:right;text-align: center;">
44.533
</td>
<td style="text-align:right;text-align: center;">
26.489
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
dagobah freightlines
</td>
<td style="text-align:right;text-align: center;">
1.835
</td>
<td style="text-align:right;text-align: center;">
16.902
</td>
<td style="text-align:right;text-align: center;">
46.864
</td>
<td style="text-align:right;text-align: center;">
23.744
</td>
</tr>
</tbody>
</table></div>
<p>De la tabla y gráfico anteriores podemos concluir que las empresas más preparadas para afrontar el futuro, según nuestro indicador (primera componente del análisis PCA) son, por este orden, <em>Shuttlepod Movers</em>, <em>Kamino Movers</em> e <em>Ícarus Star Transport</em>.</p>
<p>¿Seguro?</p>
<p>Este <em>ranking</em> se ha elaborado a partir de las compañías que formaron la muestra para realizar el análisis de componentes principales. Estas empresas eran aquellas que tenían dato en las tres variables originales, y que habían sido calificadas de <em>outliers</em>. Los <em>outliers</em> se apartaron de la muestra para evitar distorsiones y sesgos en el análisis. Pero una cuestión que podríamos plantearnos es si, una vez calculadas las combinaciones lineales que son las componentes sin su influencia, podrían ser ahora, en virtud de esas componentes calculadas, puntuadas. Que una compañía se comporte como <em>outlier</em> en una o varias de las variables originales, y no se cuente con ella a la hora de calcular las componentes; no quiere decir necesariamente que no sea una buena candidata a ser la elegida para ser adquirida por su preparación para afrontar el futuro (incluso podría concluirse que en algún aspecto está “especialmente preparada”).</p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Scores puntuando outliers</span></span>
<span><span class="va">scores_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">componentes</span>, newdata <span class="op">=</span> <span class="va">seleccion</span><span class="op">)</span></span>
<span><span class="va">scores_all</span> <span class="op">&lt;-</span> <span class="va">scores_all</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">scores_all_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">scores_all</span><span class="op">)</span></span>
<span><span class="va">scores_all_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">scores_all_df</span>,<span class="va">seleccion</span><span class="op">)</span></span>
<span><span class="va">scores_all_top10</span> <span class="op">&lt;-</span> <span class="va">scores_all_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">scores_all</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scores_all_top10</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Puntuaciones emporesas TMI (Top-10, con outliers)"</span>,</span>
<span>        col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Empresa"</span>,</span>
<span>                      <span class="st">"Puntuación"</span>,</span>
<span>                      <span class="st">"I. Diversif."</span>,</span>
<span>                      <span class="st">"I. Fidelizac."</span>,</span>
<span>                      <span class="st">"I. Digitalizac."</span><span class="op">)</span>,</span>
<span>        digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>        format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">"."</span>,</span>
<span>                           scientific <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                bootstrap_options <span class="op">=</span> <span class="st">"striped"</span>,</span>
<span>                <span class="st">"bordered"</span>,</span>
<span>                <span class="st">"condensed"</span>,</span>
<span>                position <span class="op">=</span> <span class="st">"center"</span>,</span>
<span>                font_size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold<span class="op">=</span> <span class="cn">T</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">scores_all_top10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           bold<span class="op">=</span> <span class="cn">F</span>,</span>
<span>           align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>              extra_css <span class="op">=</span> <span class="st">"text-align: left;"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-striped" style="font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-200">Table 6.7: </span><span id="tab:unnamed-chunk-200">Table 6.8: </span>Puntuaciones emporesas TMI (Top-10, con outliers)
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;text-align: center;">
Empresa
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Puntuación
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
I. Diversif.
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
I. Fidelizac.
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
I. Digitalizac.
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
arrakis freight
</td>
<td style="text-align:right;text-align: center;">
10.695
</td>
<td style="text-align:right;text-align: center;">
38.881
</td>
<td style="text-align:right;text-align: center;">
73.302
</td>
<td style="text-align:right;text-align: center;">
58.510
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
chakotay cargo systems
</td>
<td style="text-align:right;text-align: center;">
8.580
</td>
<td style="text-align:right;text-align: center;">
54.368
</td>
<td style="text-align:right;text-align: center;">
64.260
</td>
<td style="text-align:right;text-align: center;">
42.720
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
hyperdrive express
</td>
<td style="text-align:right;text-align: center;">
7.695
</td>
<td style="text-align:right;text-align: center;">
35.790
</td>
<td style="text-align:right;text-align: center;">
68.148
</td>
<td style="text-align:right;text-align: center;">
33.662
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
home one cargo
</td>
<td style="text-align:right;text-align: center;">
4.834
</td>
<td style="text-align:right;text-align: center;">
22.176
</td>
<td style="text-align:right;text-align: center;">
46.776
</td>
<td style="text-align:right;text-align: center;">
60.833
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
andromeda cargo
</td>
<td style="text-align:right;text-align: center;">
4.516
</td>
<td style="text-align:right;text-align: center;">
46.054
</td>
<td style="text-align:right;text-align: center;">
44.989
</td>
<td style="text-align:right;text-align: center;">
44.342
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
shuttlepod movers
</td>
<td style="text-align:right;text-align: center;">
2.662
</td>
<td style="text-align:right;text-align: center;">
40.677
</td>
<td style="text-align:right;text-align: center;">
43.071
</td>
<td style="text-align:right;text-align: center;">
28.098
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
kamino movers
</td>
<td style="text-align:right;text-align: center;">
2.550
</td>
<td style="text-align:right;text-align: center;">
26.602
</td>
<td style="text-align:right;text-align: center;">
44.526
</td>
<td style="text-align:right;text-align: center;">
32.715
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
icarus star transport
</td>
<td style="text-align:right;text-align: center;">
2.447
</td>
<td style="text-align:right;text-align: center;">
35.055
</td>
<td style="text-align:right;text-align: center;">
41.709
</td>
<td style="text-align:right;text-align: center;">
32.762
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
mirror universe cargo
</td>
<td style="text-align:right;text-align: center;">
2.407
</td>
<td style="text-align:right;text-align: center;">
43.021
</td>
<td style="text-align:right;text-align: center;">
41.104
</td>
<td style="text-align:right;text-align: center;">
28.170
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
sith transport corp.
</td>
<td style="text-align:right;text-align: center;">
2.326
</td>
<td style="text-align:right;text-align: center;">
33.559
</td>
<td style="text-align:right;text-align: center;">
41.863
</td>
<td style="text-align:right;text-align: center;">
31.774
</td>
</tr>
</tbody>
</table></div>
<p>Vemos como el <em>ranking</em> cambia radicalmente, y pasa a estar encabezado por las compañías <strong><em>Arrakis Freight</em></strong>, <strong><em>Chakotay Cargo Systems</em></strong> e <strong><em>Hyperdrive Express</em></strong>. Si un análisis particularizado de estas empresas por parte del equipo encargado del estudio da como resultado que sus datos son correctos, serían, seguramente, las candidatas para ser adquiridas por el magnate Arg-Us Korp.</p>
</div>
<div id="materiales-para-realizar-las-prácticas-del-capítulo.-4" class="section level2" number="6.8">
<h2>
<span class="header-section-number">6.8</span> <img src="figuras/arrow-down-circle.svg" class="hicon"> Materiales para realizar las prácticas del capítulo.<a class="anchor" aria-label="anchor" href="#materiales-para-realizar-las-pr%C3%A1cticas-del-cap%C3%ADtulo.-4"><i class="fas fa-link"></i></a>
</h2>
<p>En esta sección se muestran los links de acceso a los diferentes materiales (<em>scripts</em>, datos…) necesarios para llevar a cabo los contenidos prácticos del capítulo.</p>
<p><strong>Datos (en formato Microsoft (R) Excel (R)):</strong></p>
<ul>
<li>interestelar_100.xlsx (<a href="https://raw.githubusercontent.com/teckel71/RStars-book/main/download/trabajadores.xlsx">obtener aquí</a>)</li>
</ul>
<p><strong>Scripts:</strong></p>
<ul>
<li>componentes_rstars.R (<a href="https://raw.githubusercontent.com/teckel71/RStars-book/main/download/previo_rstars.R">obtener aquí</a>)</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="an%C3%A1lisis-previo-de-datos..html"><span class="header-section-number">5</span> Análisis previo de datos.</a></div>
<div class="next"><a href="an%C3%A1lisis-cl%C3%BAster..html"><span class="header-section-number">7</span> Análisis Clúster.</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#componentes-principales."><span class="header-section-number">6</span> Componentes principales.</a></li>
<li><a class="nav-link" href="#introducci%C3%B3n.-2"><span class="header-section-number">6.1</span>  Introducción.</a></li>
<li><a class="nav-link" href="#informaci%C3%B3n-y-varianza."><span class="header-section-number">6.2</span>  Información y varianza.</a></li>
<li><a class="nav-link" href="#la-elecci%C3%B3n-de-arg-us-korp."><span class="header-section-number">6.3</span>  La elección de Arg-Us Korp.</a></li>
<li><a class="nav-link" href="#preparaci%C3%B3n-previa-de-datos."><span class="header-section-number">6.4</span>  Preparación previa de datos.</a></li>
<li><a class="nav-link" href="#c%C3%A1lculo-de-componentes."><span class="header-section-number">6.5</span>  Cálculo de componentes.</a></li>
<li><a class="nav-link" href="#retenci%C3%B3n-de-componentes."><span class="header-section-number">6.6</span>  Retención de componentes.</a></li>
<li><a class="nav-link" href="#puntuaciones-de-los-casos-scores."><span class="header-section-number">6.7</span>  Puntuaciones de los casos (scores).</a></li>
<li><a class="nav-link" href="#materiales-para-realizar-las-pr%C3%A1cticas-del-cap%C3%ADtulo.-4"><span class="header-section-number">6.8</span>  Materiales para realizar las prácticas del capítulo.</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R-Stars: La Guía</strong>" was written by Miguel-Ángel Tarancón. It was last built on 2025-10-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
