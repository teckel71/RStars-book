<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>6 Componentes principales. | R-Stars: La Guía</title>
<meta name="author" content="Miguel-Ángel Tarancón">
<meta name="description" content="6.1 Introducción. A veces, menos es más. Esta es la filosofía que subyace a las técnicas de reducción de la dimensión de la información. Imaginemos una serie de casos (por ejemplo, las empresas de...">
<meta name="generator" content="bookdown 0.44 with bs4_book()">
<meta property="og:title" content="6 Componentes principales. | R-Stars: La Guía">
<meta property="og:type" content="book">
<meta property="og:url" content="https://teckel71.github.io/RStars-book/componentes-principales..html">
<meta property="og:image" content="https://teckel71.github.io/RStars-book/figuras/Portada_v3-2.jpg">
<meta property="og:description" content="6.1 Introducción. A veces, menos es más. Esta es la filosofía que subyace a las técnicas de reducción de la dimensión de la información. Imaginemos una serie de casos (por ejemplo, las empresas de...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="6 Componentes principales. | R-Stars: La Guía">
<meta name="twitter:description" content="6.1 Introducción. A veces, menos es más. Esta es la filosofía que subyace a las técnicas de reducción de la dimensión de la información. Imaginemos una serie de casos (por ejemplo, las empresas de...">
<meta name="twitter:image" content="https://teckel71.github.io/RStars-book/figuras/Portada_v3-2.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Inter-0.4.10/font.css" rel="stylesheet">
<link href="libs/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="libs/Inter_Tight-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="assets/styles.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R-Stars: La Guía</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li><a class="" href="prefacio.html">Prefacio</a></li>
<li><a class="" href="introducci%C3%B3n..html"><span class="header-section-number">1</span> Introducción.</a></li>
<li><a class="" href="almacenando-y-manipulando-datos..html"><span class="header-section-number">2</span> Almacenando y manipulando datos.</a></li>
<li><a class="" href="gr%C3%A1ficos..html"><span class="header-section-number">3</span> Gráficos.</a></li>
<li><a class="" href="estad%C3%ADstica-descriptiva..html"><span class="header-section-number">4</span> Estadística descriptiva.</a></li>
<li><a class="" href="an%C3%A1lisis-previo-de-datos..html"><span class="header-section-number">5</span> Análisis previo de datos.</a></li>
<li><a class="active" href="componentes-principales..html"><span class="header-section-number">6</span> Componentes principales.</a></li>
<li><a class="" href="an%C3%A1lisis-cl%C3%BAster..html"><span class="header-section-number">7</span> Análisis Clúster.</a></li>
<li><a class="" href="an%C3%A1lisis-de-la-varianza..html"><span class="header-section-number">8</span> Análisis de la varianza.</a></li>
<li><a class="" href="an%C3%A1lisis-de-regresi%C3%B3n-lineal-m%C3%BAltiple..html"><span class="header-section-number">9</span> Análisis de Regresión Lineal Múltiple.</a></li>
<li><a class="" href="an%C3%A1lisis-de-datos-cualitativos..html"><span class="header-section-number">10</span> Análisis de Datos Cualitativos.</a></li>
<li><a class="" href="bibliograf%C3%ADa.html">Bibliografía</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="componentes-principales." class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Componentes principales.<a class="anchor" aria-label="anchor" href="#componentes-principales."><i class="fas fa-link"></i></a>
</h1>
<div id="introducción.-2" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Introducción.<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n.-2"><i class="fas fa-link"></i></a>
</h2>
<p>A veces, menos es más. Esta es la filosofía que subyace a las <strong>técnicas de reducción de la dimensión</strong> de la información.</p>
<p>Imaginemos una serie de casos (por ejemplo, las empresas de un sector económico) caracterizados por múltiples variables. Puede ocurrir que, paradójicamente, el contar con tantas variables haga difícil la caracterización de los casos. Esto ocurre cuando algunas de las variables aportan una información muy parecida sobre los mismos. Por ejemplo, es más difícil hacerse una idea del comportamiento global en el ámbito económico o financiero de un grupo de empresas si tenemos que atender a los valores que toman en un conjunto de 10 variables, que si solo tenemos que atender a un par de indicadores. Las técnicas de reducción de la dimensión de la información tratan, precisamente, de disminuir el número de variables necesarias para caracterizar un grupo de casos aprovechando la posibilidad de que las (múltiples) variables originales compartan información sobre los mismos. Es decir, la idea subyacente es pasar de un planteamiento basado en manejar muchas variables con información compartida o redundante (variables que “dicen lo mismo” sobre el comportamiento de los casos) a un planteamiento en el que hay <strong>menos variables</strong>, pero que <strong>no comparten información</strong> (variables que “dicen” cosas diferentes sobre el comportamiento de los casos). En este proceso es importante que la pérdida de información sea mínima, y que solo se pierda la información redundante o repetida.</p>
<p>La principal técnica de reducción de la dimensión de la información es la de <strong>componentes principales,</strong> y es la que se expondrá y ejemplificará en el resto del capítulo. Pero antes, es preciso concretar la relación entre dos conceptos muy presentes en esta técnica: información y varianza.</p>
</div>
<div id="información-y-varianza." class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Información y varianza.<a class="anchor" aria-label="anchor" href="#informaci%C3%B3n-y-varianza."><i class="fas fa-link"></i></a>
</h2>
<p>En el apartado anterior hemos hablado de la posibilidad de que algunas variables compartan “información” sobre el comportamiento de los casos que constituyen nuestra muestra u objeto de estudio. Pero, ¿qué es, en este contexto, la “información”?</p>
<p>La <strong><em>información</em></strong> que una variable contiene sobre un conjunto de casos puede entenderse como su <strong>capacidad para diferenciar a unos casos de otros</strong>.</p>
<p>Observemos este ejemplo, en el que se representan los valores que toman un grupo de 20 empresas en 3 variables.</p>
<div class="float">
<img src="figuras/varianza.png" alt="Información y Varianza"><div class="figcaption">Información y Varianza</div>
</div>
<p>En la variable 1, todas las empresas toman el mismo valor. Por tanto, la capacidad que tiene la variable para distinguir a los casos (empresas), unos de otros, es nula. Eso es debido a que, en definitiva, esta variable no contiene información sobre el grupo de 20 empresas.</p>
<p>En la variable 2, existe cierta dispersión, aunque reducida, en los valores que adoptan los casos. Esto permite distinguir a unos de otros, aunque a veces con cierta dificultad. Por ejemplo, la empresa 17 se distingue del resto por ser la que tiene un valor (un poco) mayor. Aun así, como la dispersión es reducida, no se distinguen algunos casos de otros demasiado bien. En definitiva, la variable 2 contiene cierta cantidad de información sobre el conjunto de empresas de la muestra, aunque no demasiado grande.</p>
<p>Por último, la variable 3 muestra una dispersión considerablemente mayor que las otras dos variables. Existe un amplio abanico de valores que toman los diferentes casos (empresas). Esto hace que puedan diferenciarse con facilidad, en general, unos de otros. Esta variable posee, por tanto, una cantidad de información superior respecto a las empresas, ya que observando los valores que toman en la variable pueden diferenciarse con facilidad unas de otras.</p>
<p>Como conclusión, podemos establecer que cuanto mayor dispersión muestra una variable para un grupo de casos, mayor cantidad de información contiene sobre ellos, en el sentido de disfrutar de un mayor “poder” de diferenciación de unos casos respecto a otros.</p>
<p>Una medida de la dispersión de una variable usualmente utilizada es la <strong>varianza</strong>. Por tanto, en cierta manera, la varianza sirve para medir la cantidad de información que contiene la variable: a mayor varianza, mayor dispersión. Y a mayor dispersión, mayor cantidad de información.</p>
<p>En el ejemplo, puede observarse cómo la variable 3 es la que mayor varianza tiene, luego la variable 2, y la variable 1 tiene una varianza de 0 (y no posee información sobre las 20 empresas). Esta comparación de varianzas es válida siempre y cuando las tres variables estén expresadas en las mismas unidades, ya que la varianza es una medida de dispersión absoluta. Por ello, para poder comparar, hemos añadido también en el ejemplo una medida de dispersión relativa: el coeficiente de variación. Podemos comprobar cómo el mayor coeficiente de variación pertenece a la variable 3 (que es la que tiene una mayor cantidad de información), luego la variable 2 (que cuenta con menor cantidad de información), y por último la variable 1, con un coeficiente de 0 (no contiene información sobre las empresas).</p>
</div>
<div id="cálculo-de-componentes." class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Cálculo de componentes.<a class="anchor" aria-label="anchor" href="#c%C3%A1lculo-de-componentes."><i class="fas fa-link"></i></a>
</h2>
<p>Vamos a considerar una serie de variables (en escala métrica) que caracterizan a la población de empresas de producción eléctrica mediante tecnología eólica en lo referente a la idea de “solidez del negocio”. Hemos seleccionado una muestra de 60 empresas. Nuestro objetivo es obtener una combinación lineal de estas variables (“componente principal”) que recoja la mayor parte de la suma de varianzas de las variables originales (“comunalidad”), de manera que pueda usarse como un indicador que resume o sintetiza el grado de solidez del negocio de cada empresa, con una pérdida mínima de información.</p>
<p>Las variables a partir de las cuales construiremos el indicador (“componente principal”) son:</p>
<ul>
<li><p><strong>RES:</strong> Resultado del ejercicio.</p></li>
<li><p><strong>FPIOS:</strong> Fondos propios.</p></li>
<li><p><strong>MARGEN:</strong> Margen de beneficio.</p></li>
<li><p><strong>SOLVENCIA:</strong> Coeficiente de solvencia.</p></li>
</ul>
<p>Vamos a suponer que trabajamos dentro de un <strong>proyecto</strong> que hemos creado previamente, de nombre “componentes”. Dentro de la carpeta del proyecto guardaremos el <em>script</em> llamado “componentes_eolica.R”, y el archivo de Microsoft® Excel® llamado “eolica_60.xlsx”. Si abrimos este último archivo, comprobaremos que se compone de tres hojas. La primera muestra un mensaje sobre el uso de los datos, la segunda recoge la descripción de las variables consideradas, y la tercera (hoja “Datos”) almacena los datos que debemos importar. Estos datos se corresponden con diferentes variables económico-financieras de 60 empresas productoras de electricidad mediante generación eólica.</p>
<p>Es muy importante observar que existen variables con datos faltantes (<em>missing values</em>). En concreto, podemos identificar estas faltas de dato por la existencia de celdas en blanco; pero también por la existencia de celdas con el texto “n.d.” (no dato). Así, tendremos que aplicar código adicional en el comando de importación de R para que estos casos queden correctamente recogidos como <em>NAs</em> (<em>not available</em>).</p>
<p>Cerraremos el archivo de Microsoft® Excel®, “<a href="https://docs.google.com/spreadsheets/d/1G7yk22TShY1bYS1i9v4PfVi_HCkOG2ZO/edit?usp=sharing&amp;ouid=115375878280465826079&amp;rtpof=true&amp;sd=true">eolica_60.xlsx</a>” y volveremos a RStudio. Después, abriremos nuestro <em>script</em> “<a href="https://drive.google.com/file/d/1d0ss6sh-jIAcrrlWSHHQI_CfRtiDqANX/view?usp=sharing">componentes_eolica.R</a>”. Este <em>script</em> contiene el programa que vamos a ejecutar en lel ejemplo.</p>
<p>La primera línea / instrucción en el <em>script</em> es:</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>La instrucción tiene como objeto limpiar el <em>Environment</em> (memoria) de objetos de anteriores sesiones de trabajo. Para importar los datos almacenados en la hoja “Datos” del archivo “eolica_60.xlsx”, ejecutaremos el código:</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DATOS</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"eolica_60.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"Datos"</span>, na <span class="op">=</span> <span class="st">"n.d."</span><span class="op">)</span></span></code></pre></div>
<p>Podemos observar cómo, en el <em>Environment,</em> ya aparece un objeto. Este objeto es una estructura de datos tipo <em>data frame</em>, se llama “datos” y contiene 12 columnas, una por cada una de las variables almacenadas en el archivo de Microsoft® Excel®. De estas variables, tres son de tipo cualitativo (atributos o factores), formadas por cadenas de caracteres: el nombre de la empresa (NOMBRE), el nombre de la sociedad matriz (grupo empresarial) a la que pertenece (MATRIZ), y el tamaño de dicho grupo de empresas (DIMENSION).</p>
<p>R ha considerado la primera columna de la hoja de Excel (NOMBRE) como una variable de tipo cualitativo o atributo. En realidad no es una variable; sino el nombre de los casos (empresas). Para evitar esto, podemos redefinir nuestro <em>data frame</em> diciéndole que esa primera columna contiene los nombres de los casos (filas):</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DATOS</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">datos</span>, row.names <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>En la línea anterior hemos asignado al <em>data frame</em> “datos” los propios datos de “datos”; pero indicando que la primera columna no es una variable; sino el nombre de los casos o filas (empresas). Advertimos que ya no aparece NOMBRE como variable, y que en el <em>Environment</em> ya aparece el <em>data frame</em> “datos” con 60 observaciones, pero con 11 variables (una menos).</p>
<p>Como en el ejemplo se plantea construir un indicador basado en las 4 variables antes indicadas (RES, FPIOS, MARGEN y SOLVENCIA), crearemos un <em>data frame</em> con solo esas variables. Lo llamaremos, por ejemplo, “muestra”:</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Seleccionando variables metricas para el analisis.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">muestra</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">RES</span>, <span class="va">FPIOS</span>, <span class="va">MARGEN</span>, <span class="va">SOLVENCIA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span> <span class="op">(</span><span class="va">muestra</span><span class="op">)</span></span></code></pre></div>
<pre><code>##       RES            FPIOS            MARGEN          SOLVENCIA     
##  Min.   :-5661   Min.   :-77533   Min.   :-302.03   Min.   :-40.74  
##  1st Qu.:  496   1st Qu.:  2323   1st Qu.:  11.70   1st Qu.:  5.94  
##  Median : 1939   Median :  9727   Median :  27.64   Median : 16.88  
##  Mean   : 2699   Mean   : 18801   Mean   :  30.63   Mean   : 28.12  
##  3rd Qu.: 3903   3rd Qu.: 26493   3rd Qu.:  39.59   3rd Qu.: 51.38  
##  Max.   :17026   Max.   :177707   Max.   : 400.90   Max.   : 99.08  
##  NA's   :1       NA's   :1        NA's   :2         NA's   :1</code></pre>
<p>El siguiente paso será localizar los posibles <strong><em>missing values</em></strong>, ya que para obtener componentes principales es necesario que todos los casos posean dato para todas las variables del análisis. Para tener una idea general, se puede utilizar la función <code><a href="https://docs.ropensci.org/visdat/reference/vis_miss.html">vis_miss()</a></code> del paquete <a href="https://docs.ropensci.org/visdat/">visdat</a>, que localizará gráficamente los <em>missing values</em> de las diferentes variables, y calculará el porcentaje de casos que supone, con respecto al total de observaciones:</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/visdat/">visdat</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/visdat/reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">muestra</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-343-1.png" width="672"></div>
<p>Del gráfico anterior se desprende que existen 5 <em>missing values</em> repartidos en las 4 variables del estudio. Para localizarlos, podemos filtrar nuestro <em>data frame</em> con las herramientas de <a href="https://dplyr.tidyverse.org">dplyr</a>:</p>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">muestra</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">RES</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">FPIOS</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">MARGEN</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">SOLVENCIA</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">RES</span>, <span class="va">FPIOS</span>, <span class="va">MARGEN</span>, <span class="va">SOLVENCIA</span><span class="op">)</span>  </span></code></pre></div>
<pre><code>##                                       RES      FPIOS  MARGEN SOLVENCIA
## Biovent Energia SA                     NA 70033.0000  22.792    38.082
## Eolica La Janda SL             9880.09100         NA  38.256    16.428
## Parc Eolic Sant Antoni SL       668.00000  9727.0000      NA    13.964
## WPD Parque Eolico El Poleo SL.  -30.63754   520.6033 -11.121        NA
## Eolica La Brujula SA           2306.06200 21694.7910      NA    51.474</code></pre>
<p>Ante la existencia de <em>missing values</em>, se puede actuar de varios modos. Por ejemplo, <strong>se puede intentar obtener por otro canal de información el conjunto de valores</strong> que no están disponibles, <strong>o recurrir a alguna estimación</strong>. En caso de que esto sea difícil, se puede optar, simplemente, por <strong>eliminar</strong> estos casos, en especial cuando representan un porcentaje muy reducido respecto al total de casos. En nuestro ejemplo, supondremos que hemos optado por esta última vía, y eliminaremos estos casos con el código:</p>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">muestra</span> <span class="op">&lt;-</span> <span class="va">muestra</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">RES</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">FPIOS</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">MARGEN</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">SOLVENCIA</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
<p>Verificamos en el <em>Environment</em> que el <em>data frame</em> “muestra” ha pasado a tener 53 casos.</p>
<p>Por otro lado, la técnica de componentes principales <strong>es muy sensible a la existencia de <em>outliers</em></strong>. En consecuencia, deberán ser identificados y, en su caso, eliminados. Para realizar este proceso, y dado que en nuestro análisis contamos con 4 variables, primero “resumiremos” el valor que toman dichas variables para cada observación (empresa), mediante el cálculo de la <em>distancia de Mahalanobis</em>. De hecho, las distancias de los diferentes casos se almacenarán en una nueva columna o variable de nuestro <em>data frame,</em> a la que llamaremos MAHALANOBIS:</p>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">muestra</span> <span class="op">&lt;-</span> <span class="va">muestra</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span> <span class="op">(</span>MAHALANOBIS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/mahalanobis.html">mahalanobis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">RES</span>, <span class="va">FPIOS</span>, <span class="va">MARGEN</span>, <span class="va">SOLVENCIA</span><span class="op">)</span>,</span>
<span>            center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">colMeans</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">RES</span>, <span class="va">FPIOS</span>, <span class="va">MARGEN</span>, <span class="va">SOLVENCIA</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            cov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cov</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">RES</span>, <span class="va">FPIOS</span>, <span class="va">MARGEN</span>, <span class="va">SOLVENCIA</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Dentro de las funciones <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> hay unos puntos. Recordemos que estos puntos deben ser añadidos cuando una función no es la primera del operador “<em>pipe</em>” (<code>%&gt;%</code>), para indicar que las variables de los paréntesis hacen referencia al <em>data frame</em> “muestra” (o, en general, el objeto que fluye a través del “<em>pipe</em>”).</p>
<p>A continuación, construiremos un diagrama de caja de la variable MAHALANOBIS, como si fuera cualquier otra variable, a partir de la función <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> del paquete <a href="https://ggplot2.tidyverse.org">ggplot2</a>:</p>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">muestra</span>, map <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">MAHALANOBIS</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"DISTANCIA DE MAHALANOBIS"</span>, subtitle <span class="op">=</span> <span class="st">"Empresas eólicas"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"MAHALANOBIS"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-347-1.png" width="672"></div>
<p>En el gráfico se observa que existen, por encima de la caja, varios <em>outliers</em>. Para identificarlos de modo concreto, hemos de calcular los cuartiles primero y tercero de la variable MAHALANOBIS y pasar el correspondiente filtro:</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Q1M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span> <span class="op">(</span><span class="va">muestra</span><span class="op">$</span><span class="va">MAHALANOBIS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">Q3M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span> <span class="op">(</span><span class="va">muestra</span><span class="op">$</span><span class="va">MAHALANOBIS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.75</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">muestra</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span> <span class="op">&gt;</span> <span class="va">Q3M</span> <span class="op">+</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span> <span class="op">|</span></span>
<span>         <span class="va">MAHALANOBIS</span> <span class="op">&lt;</span> <span class="va">Q1M</span> <span class="op">-</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>         <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span></span></code></pre></div>
<pre><code>##                                     MAHALANOBIS
## Viesgo Renovables SL.                  35.05290
## Guzman Energia SL                      10.31024
## WPD Wind Investment SL.                21.69461
## Molinos Del Ebro SA                    24.38816
## Tarraco Eolica SA                      21.91118
## WPD Parque Eolico Las Panaderas SL.     8.21836
## Eolica Navarra SL                      13.41478</code></pre>
<p>Si, tras el estudio de los valores que toman las variables originales en estos casos, se decide eliminarlos, el código será:</p>
<div class="sourceCode" id="cb235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">muestra_so</span> <span class="op">&lt;-</span> <span class="va">muestra</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span> <span class="op">&lt;=</span> <span class="va">Q3M</span> <span class="op">+</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>         <span class="va">MAHALANOBIS</span> <span class="op">&gt;=</span> <span class="va">Q1M</span> <span class="op">-</span> <span class="fl">1.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">MAHALANOBIS</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">muestra_so</span> <span class="op">&lt;-</span> <span class="va">muestra_so</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">MAHALANOBIS</span><span class="op">)</span></span></code></pre></div>
<p>Se ha creado un nuevo <em>data frame</em> llamado “muestra_so” con los casos que <strong>no</strong> son <em>outliers</em> (y que no contienen <em>missing values</em>), y se ha eliminado la variable MAHALANOBIS, puesto que su única utilidad era la de localizar y filtrar los <em>outliers</em>. Con este <em>data frame</em> “muestra_so” es con el que se procederá al cálculo de las componentes.</p>
<p>La condición previa para el cálculo de componentes es que las variables originales del análisis contengan información redundante, es decir, que en buena medida aporten una “misma información” sobre los casos (empresas). Esto se verifica con la existencia de altas correlaciones entre las variables (al menos, entre algunas de ellas). Por tanto, hemos de calcular la matriz de correlaciones correspondiente. Un modo gráfico visualmente efectivo es utilizar las posibilidades que nos ofrece el paquete <a href="https://ggobi.github.io/ggally/">GGally</a> mediante la función <code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs()</a></code>:</p>
<div class="sourceCode" id="cb236"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Correlaciones.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally/">GGally</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">corr_plot_so</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs</a></span><span class="op">(</span><span class="va">muestra_so</span>, </span>
<span>                        lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>continuous <span class="op">=</span> <span class="fu"><a href="https://ggobi.github.io/ggally/reference/wrap.html">wrap</a></span><span class="op">(</span><span class="st">"cor"</span>,</span>
<span>                                                       size <span class="op">=</span> <span class="fl">4.5</span>,</span>
<span>                                                       method <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>                                                       stars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        title <span class="op">=</span> <span class="st">"Matriz de Correlación sin outliers"</span><span class="op">)</span></span>
<span><span class="va">corr_plot_so</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-350-1.png" width="672"></div>
<p>Puede apreciarse cómo existen altas correlaciones (en valor absoluto) entre todas las variables. Por tanto, tiene sentido hacer un análisis de componentes principales, ya que hay variables que parecen <strong>compartir información</strong>.</p>
<p>La obtención de las componentes se va a realizar mediante la función <code><a href="https://rdrr.io/r/stats/prcomp.html">prcomp()</a></code>. Es conveniente que activemos el argumento <code>scale =</code> con “T” (<em>true</em>) para que las variables originales sean consideradas en sus <strong>versiones tipificadas</strong>. Vamos a asignar los resultados a un objeto de nombre, por ejemplo, “componentes”. Por último, guardaremos el <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> o resumen de los resultados con un nombre provisional, por ejemplo, “temporal”. El código es el siguiente:</p>
<div class="sourceCode" id="cb237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtencion de componentes.</span></span>
<span></span>
<span><span class="va">componentes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/prcomp.html">prcomp</a></span> <span class="op">(</span><span class="va">muestra_so</span>, scale<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">temporal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span> <span class="op">(</span><span class="va">componentes</span><span class="op">)</span></span>
<span><span class="va">temporal</span></span></code></pre></div>
<pre><code>## Importance of components:
##                           PC1    PC2    PC3    PC4
## Standard deviation     1.6903 0.7646 0.6487 0.3709
## Proportion of Variance 0.7143 0.1462 0.1052 0.0344
## Cumulative Proportion  0.7143 0.8604 0.9656 1.0000</code></pre>
<p>La “<em>Standard deviation</em>” es la raíz cuadrada de los autovalores asociados a cada componente. “<em>Proportion of Variance</em>” nos dice la proporción de la suma de varianzas de las variables originales (<em>comunalidad</em>) recogida por cada componente, proporción que se acumula en “<em>Cumulative Proportion</em>”. Nótese que las componentes aparecen ordenadas de más a menos importantes en función de la cantidad de varianza que capturan. En este caso, la primera componente acumula más del 71% de la varianza (comportamiento) de las variables originales. Por tanto, esta primera componente resume bastante bien la información que las 4 variables originales contienen sobre los casos (empresas).</p>
<p>Si el elemento “importance” del <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> o resumen “temporal” lo convertimos en un <em>data frame</em>, por ejemplo “summary_df”, podremos presentar los resultados por medio de una tabla estéticamente más atractiva, a partir de la función <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable()</a></code> del paquete <a href="https://yihui.org/knitr/">knitr</a>, y las funciones complementarias del paquete <a href="http://haozhu233.github.io/kableExtra/">kableExtra</a>:</p>
<div class="sourceCode" id="cb239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convertir el resumen en un data frame</span></span>
<span></span>
<span><span class="va">summary_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">temporal</span><span class="op">$</span><span class="va">importance</span><span class="op">)</span></span>
<span><span class="va">summary_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">)</span>  <span class="co"># Transponer para mejor visualización</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span> <span class="op">(</span><span class="va">temporal</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Crear la tabla con kable y personalizarla con kableExtra</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span><span class="va">knitr.table.format</span> <span class="op">=</span> <span class="st">"html"</span></span>
<span></span>
<span><span class="va">summary_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Resumen de Componentes"</span>,</span>
<span>      col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Desviación típica"</span>,<span class="st">"Proporción de varianza (comunalidad)"</span>,</span>
<span>                    <span class="st">"Proporción de varianza (comunalidad) acumulada"</span><span class="op">)</span>,</span>
<span>      format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">"."</span>, digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"bordered"</span>, <span class="st">"condensed"</span><span class="op">)</span>,</span>
<span>                full_width <span class="op">=</span> <span class="cn">F</span>, </span>
<span>                position <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold<span class="op">=</span> <span class="cn">T</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">)</span><span class="op">)</span>, bold<span class="op">=</span> <span class="cn">F</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>, extra_css <span class="op">=</span> <span class="st">"text-align: left;"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-striped table-bordered table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-353">Table 6.1: </span><span id="tab:unnamed-chunk-353">Table 6.2: </span>Resumen de Componentes
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;text-align: center;">
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Desviación típica
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Proporción de varianza (comunalidad)
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Proporción de varianza (comunalidad) acumulada
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
PC1
</td>
<td style="text-align:right;text-align: center;">
1.6903
</td>
<td style="text-align:right;text-align: center;">
0.7143
</td>
<td style="text-align:right;text-align: center;">
0.7143
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
PC2
</td>
<td style="text-align:right;text-align: center;">
0.7646
</td>
<td style="text-align:right;text-align: center;">
0.1462
</td>
<td style="text-align:right;text-align: center;">
0.8604
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
PC3
</td>
<td style="text-align:right;text-align: center;">
0.6487
</td>
<td style="text-align:right;text-align: center;">
0.1052
</td>
<td style="text-align:right;text-align: center;">
0.9656
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
PC4
</td>
<td style="text-align:right;text-align: center;">
0.3709
</td>
<td style="text-align:right;text-align: center;">
0.0344
</td>
<td style="text-align:right;text-align: center;">
1.0000
</td>
</tr>
</tbody>
</table></div>
<p>Los coeficientes o <strong>cargas</strong> de cada componente se obtienen pidiendo a nuestro objeto “componentes” el elemento “rotation”. Estas cargas las vamos a guardar en un nuevo objeto que llamaremos, por ejemplo, “cargas”, que presentaremos mediante una pequeña tabla diseñada con la función <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable()</a></code> del paquete <a href="https://yihui.org/knitr/">knitr</a> y otras funciones del paquete <a href="http://haozhu233.github.io/kableExtra/">kableExtra</a>:</p>
<div class="sourceCode" id="cb240"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cargas de cada componente.</span></span>
<span></span>
<span><span class="va">cargas</span> <span class="op">&lt;-</span> <span class="va">componentes</span><span class="op">$</span><span class="va">rotation</span></span>
<span><span class="va">cargas</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Cargas de las componentes obtenidas"</span>,</span>
<span>        format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">"."</span>, digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, bootstrap_options <span class="op">=</span> <span class="st">"striped"</span>,</span>
<span>                <span class="st">"bordered"</span>, <span class="st">"condensed"</span>,</span>
<span>                position <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold<span class="op">=</span> <span class="cn">T</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">cargas</span><span class="op">)</span><span class="op">)</span>, bold<span class="op">=</span> <span class="cn">F</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>, extra_css <span class="op">=</span> <span class="st">"text-align: left;"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-striped" style="font-size: condensed; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-355">Table 6.3: </span><span id="tab:unnamed-chunk-355">Table 6.4: </span>Cargas de las componentes obtenidas
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;text-align: center;">
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
PC1
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
PC2
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
PC3
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
PC4
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
RES
</td>
<td style="text-align:right;text-align: center;">
0.4915
</td>
<td style="text-align:right;text-align: center;">
0.5578
</td>
<td style="text-align:right;text-align: center;">
0.48460
</td>
<td style="text-align:right;text-align: center;">
0.46094
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
FPIOS
</td>
<td style="text-align:right;text-align: center;">
0.5491
</td>
<td style="text-align:right;text-align: center;">
-0.1554
</td>
<td style="text-align:right;text-align: center;">
0.33515
</td>
<td style="text-align:right;text-align: center;">
-0.74971
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
MARGEN
</td>
<td style="text-align:right;text-align: center;">
0.4803
</td>
<td style="text-align:right;text-align: center;">
0.3406
</td>
<td style="text-align:right;text-align: center;">
-0.80447
</td>
<td style="text-align:right;text-align: center;">
-0.07849
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
SOLVENCIA
</td>
<td style="text-align:right;text-align: center;">
0.4758
</td>
<td style="text-align:right;text-align: center;">
-0.7407
</td>
<td style="text-align:right;text-align: center;">
-0.07528
</td>
<td style="text-align:right;text-align: center;">
0.46830
</td>
</tr>
</tbody>
</table></div>
<p>A partir de las cargas se pueden explicitar las ecuaciones correspondientes a cada componente. Por ejemplo, para la primera componente, la ecuación será:</p>
<p><span class="math display">\[
\text{CP}_{i1} = 0.4915 \cdot \text{RES}_{i1} + 0.5491 \cdot \text{FPIOS}_{i1} + 0.4803 \cdot \text{MARGEN}_{i1} + 0.4758 \cdot \text{SOLVENCIA}_{i1}
\]</span> Puede apreciarse que, en cuanto a la primera componente, que es la que especialmente nos interesa como “indicador” de la “solidez del negocio” en el caso de las empresas eólicas seleccionadas, las 4 cargas tienen signo positivo, lo que implica que, cuanto mayores sean los valores de una empresa en las varibles RES (resultado), FPIOS (fondos propios), MARGEN (margen de beneficio) y SOLVENCIA (coeficiente de solvencia), mayor será el valor ndel indicador y, por tanto, la solidez del negocio. Además, como las variables fueron tipificadas, el valor de las cargas son comparables. De este modo, vemos cómo, dentro de la primera componente, que es la que adoptamos como “indicador de solidez”, la mayor importancia la tiene el valor de los fondos propios de la empresa, seguido del resultado del ejercicio, el margen y la solvencia.</p>
</div>
<div id="retención-de-componentes-principales." class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Retención de componentes principales.<a class="anchor" aria-label="anchor" href="#retenci%C3%B3n-de-componentes-principales."><i class="fas fa-link"></i></a>
</h2>
<p>La etapa de retención de componentes principales consiste en decidir cuántas de las componentes generadas (recordemos que, en un principio, se calculan tantas componentes como variable originales) consideramos que resumen de un modo aceptable la información contenida en las variables originales. Estas <strong>componentes “retenidas” se convertirán en las componentes principales</strong>.</p>
<p>La primera componente siempre es retenida y, por tanto, es una “componente principal”. El resto, que van capturando proporciones cada vez más pequeñas de la varianza común de las variables originales (comunalidad), podrán o no retenerse; aunque, siempre, la retención de una componente implica que se han retenido todas las anteriores.</p>
<p>Hay varios procedimientos o criterios para tomar la decisión de cuántas componentes retener. Uno de ellos, comúnmente aplicado, es el de <strong>retener aquellas componentes cuyo autovalor es mayor que 1</strong> (suponiendo que se ha trabajado con las variables en sus versiones tipificadas).</p>
<p>Los autovalores, como ya vimos, son el cuadrado del elemento “Standard deviation” (sdev) del objeto “componentes” que hemos generado a partir de la función <code><a href="https://rdrr.io/r/stats/prcomp.html">prcomp()</a></code>. Hemos creado un <em>data frame</em> con estos autovalores calculados (y su orden, al que hemos llamado variable o columna “orden”, y que es un vector de números enteros consecutivos que va desde uno hasta número de variables originales o de componentes) y los hemos dispuesto en un gráfico de barras:</p>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Determinacion Componentes a retener.</span></span>
<span></span>
<span><span class="co"># Criterio del Autovalor mayor que 1.</span></span>
<span></span>
<span><span class="va">orden</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">muestra_so</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">autovalor</span> <span class="op">&lt;-</span> <span class="va">componentes</span><span class="op">$</span><span class="va">sdev</span><span class="op">^</span><span class="fl">2</span></span>
<span><span class="va">autovalores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">orden</span>, <span class="va">autovalor</span><span class="op">)</span></span>
<span></span>
<span><span class="va">autograph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">autovalores</span>,</span>
<span>                    map <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">orden</span>, y <span class="op">=</span> <span class="va">autovalor</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>                      colour <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>                      fill <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>                      alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1</span>, colour <span class="op">=</span> <span class="st">"dark blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">autovalor</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       vjust <span class="op">=</span> <span class="fl">1</span>, colour <span class="op">=</span> <span class="st">"dark blue"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"AUTOVALORES DE LAS COMPONENTES"</span>,</span>
<span>                     subtitle <span class="op">=</span> <span class="st">"Empresas eólicas"</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span> <span class="op">(</span><span class="st">"Número de componente"</span><span class="op">)</span> <span class="op">+</span></span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Autovalor"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">autograph</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-356-1.png" width="672"></div>
<p>Respecto al gráfico, conviene recordar que, al ser un gráfico de barras, si no se quieren representar las frecuencias sino los valores que toma una variable (en este caso, “autovalor”) para cada valor de la otra variable (en este caso, “orden”); en el <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> habrá que añadir el argumento <code>stat =</code> con el valor “identity”. Además, se utiliza el elemento <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous()</a></code> para pesonalizar la escala del eje x, y que se divida dicho eje en tantos tramos como componentes hay.</p>
<p>En el gráfico obtenido se advierte que solo el primer autovalor es mayor que 1, por lo que solo se retendrá la primera componente, que será la única <strong>componente principal.</strong> Nuestro objetivo era, de todos modos, obtener un único indicador (de “solidez del negocio”) que resuma la información contenida en las cuatro variables RES, FPIOS, MARGEN y SOLVENCIA, por lo que, aunque hubiera habido más componentes con autovalor mayor que uno, solo hubiéramos seleccionado la primera. No obstante, este resultado es positivo para nuestros intereses, ya que reafirma la idea de que únicamente con la primera componente se recoge una gran proporción de la <em>comunalidad</em> o varianza conjunta (comportamiento) de las 4 variables, luego es un buen resumen global de las mismas. Esto ya se vio anteriormente al hacer <code>summary (componentes)</code>, aunque se puede representar gráficamente con el siguiente código:</p>
<div class="sourceCode" id="cb242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Determinar si cada autovalor es mayor o igual a 1</span></span>
<span></span>
<span><span class="va">autovalores</span> <span class="op">&lt;-</span> <span class="va">autovalores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>variacum <span class="op">=</span> <span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="op">(</span><span class="va">autovalor</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">checkcp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">$</span><span class="va">autovalor</span> <span class="op">&gt;=</span> <span class="fl">1</span>, <span class="st">"CP"</span>, <span class="st">"NCP"</span><span class="op">)</span></span>
<span><span class="va">checkcp</span></span></code></pre></div>
<pre><code>## [1] "CP"  "NCP" "NCP" "NCP"</code></pre>
<div class="sourceCode" id="cb244"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vacumgraph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">autovalores</span>, map <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">orden</span>,</span>
<span>                                                    y <span class="op">=</span> <span class="va">variacum</span>,</span>
<span>                                                    fill <span class="op">=</span> <span class="va">checkcp</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, colour <span class="op">=</span> <span class="st">"red"</span>, alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">autovalores</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">variacum</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>, vjust <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                        colour <span class="op">=</span> <span class="st">"dark blue"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"COMUNALIDAD ACUMULADA POR COMPONENTES"</span>,</span>
<span>                      subtitle <span class="op">=</span> <span class="st">"Empresas eólicas"</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span> <span class="op">(</span><span class="st">"Número de componente"</span><span class="op">)</span> <span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Varianza acumulada"</span><span class="op">)</span></span>
<span><span class="va">vacumgraph</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-357-1.png" width="672"></div>
<p>Para obtener el gráfico anterior, se comienza añadiendo al <em>data frame</em> “autovalores” una columna o variable que es la s<em>uma acumulada del porcentaje de</em> <em>comunalidad</em> recogido por las sucesivas componentes, que están ordenadas de mayor a menor autovalor. Para calcular el porcentaje, se usa la función <code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code>, y se tiene en cuenta que, como las variables fueron tipificadas para calcular las componentes, la <em>comunalidad</em>, que coincide con la suma de las varianzas de las componentes (autovalores), es igual al número de variables o componentes (valor que toma la función <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code>).</p>
<p>Después, se ha creado un vector que contiene tantos elementos como variables o componentes hay en el análisis (vector “checkcp”). Con la función condicional <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> se consigue que los elementos de “checkcp” sean “CP” o “NCP” según los correspondientes autovalores sean mayores o no que 1. Finalmente, según sea el valor de cada elemento de “checkcp”, las barras del gráfico se colorearán de uno u otro modo.</p>
<p>Posteriormente, mediante el paquete <a href="https://patchwork.data-imaginist.com">patchwork</a>, se han unido los dos gráficos creados en esta fase, poniendo uno debajo del otro:</p>
<div class="sourceCode" id="cb245"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span></span>
<span><span class="va">autograph</span> <span class="op">/</span> <span class="va">vacumgraph</span></span></code></pre></div>
<div class="inline-figure"><img src="RstarS_files/figure-html/unnamed-chunk-358-1.png" width="672"></div>
</div>
<div id="puntuaciones-de-los-casos-scores" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Puntuaciones de los casos (scores)<a class="anchor" aria-label="anchor" href="#puntuaciones-de-los-casos-scores"><i class="fas fa-link"></i></a>
</h2>
<p>Para obtener las puntuaciones de cada caso (empresa) en el indicador de “solidez del negocio” (y que es nuestra componente principal, que a su vez coincide con la primera componente), simplemente debemos tener en cuenta que tales puntuaciones están guardadas en la matriz “x” del objeto <code><a href="https://rdrr.io/r/stats/prcomp.html">prcomp()</a></code> creado. Vamos a renombrar a las primera columna (componente) de esta matriz como “scores” y vamos a ver las puntuaciones de las empresas, que volcaremos en una tabla, junto al valor que toman en las variables originales, recolocando las filas (empresas) de mayor a menor valor de la puntuación (lo que se consigue mediante la función <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> del paquete <a href="https://dplyr.tidyverse.org">dplyr</a>:</p>
<div class="sourceCode" id="cb246"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Scores.</span></span>
<span></span>
<span><span class="va">scores</span> <span class="op">&lt;-</span> <span class="va">componentes</span><span class="op">$</span><span class="va">x</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span> <span class="co">#tantas columnas como componentes retenidas</span></span>
<span><span class="va">scores_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span></span>
<span><span class="va">scores_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">scores_df</span>,<span class="va">muestra_so</span><span class="op">)</span></span>
<span><span class="va">scores_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Puntuaciones de las componentes obtenidas"</span>,</span>
<span>        col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Empresa"</span>, <span class="st">"Puntuación"</span>, <span class="st">"Resultado"</span>, <span class="st">"F. Propios"</span>,</span>
<span>                      <span class="st">"Margen"</span>, <span class="st">"Solvencia"</span><span class="op">)</span>,</span>
<span>        format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">"."</span>, digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, bootstrap_options <span class="op">=</span> <span class="st">"striped"</span>,</span>
<span>                <span class="st">"bordered"</span>, <span class="st">"condensed"</span>,</span>
<span>                position <span class="op">=</span> <span class="st">"center"</span>, font_size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold<span class="op">=</span> <span class="cn">T</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">scores_df</span><span class="op">)</span><span class="op">)</span>, bold<span class="op">=</span> <span class="cn">F</span>, align <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>, extra_css <span class="op">=</span> <span class="st">"text-align: left;"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-striped" style="font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-360">Table 6.5: </span><span id="tab:unnamed-chunk-360">Table 6.6: </span>Puntuaciones de las componentes obtenidas
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;text-align: center;">
Empresa
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Puntuación
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Resultado
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
F. Propios
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Margen
</th>
<th style="text-align:right;font-weight: bold;text-align: center;">
Solvencia
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolia Gregal De Inversiones SA.
</td>
<td style="text-align:right;text-align: center;">
6.34608
</td>
<td style="text-align:right;text-align: center;">
9420.00
</td>
<td style="text-align:right;text-align: center;">
81778.0
</td>
<td style="text-align:right;text-align: center;">
186.208
</td>
<td style="text-align:right;text-align: center;">
79.196
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Elecdey SL
</td>
<td style="text-align:right;text-align: center;">
3.55316
</td>
<td style="text-align:right;text-align: center;">
5539.03
</td>
<td style="text-align:right;text-align: center;">
41042.3
</td>
<td style="text-align:right;text-align: center;">
144.924
</td>
<td style="text-align:right;text-align: center;">
65.208
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
CYL Energia Eolica SL
</td>
<td style="text-align:right;text-align: center;">
2.87125
</td>
<td style="text-align:right;text-align: center;">
9401.38
</td>
<td style="text-align:right;text-align: center;">
51821.6
</td>
<td style="text-align:right;text-align: center;">
37.795
</td>
<td style="text-align:right;text-align: center;">
51.290
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Esquilvent SL
</td>
<td style="text-align:right;text-align: center;">
2.38469
</td>
<td style="text-align:right;text-align: center;">
9010.21
</td>
<td style="text-align:right;text-align: center;">
48769.1
</td>
<td style="text-align:right;text-align: center;">
39.476
</td>
<td style="text-align:right;text-align: center;">
30.938
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Disa Duna SL.
</td>
<td style="text-align:right;text-align: center;">
2.35060
</td>
<td style="text-align:right;text-align: center;">
2594.40
</td>
<td style="text-align:right;text-align: center;">
42283.1
</td>
<td style="text-align:right;text-align: center;">
55.953
</td>
<td style="text-align:right;text-align: center;">
98.303
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parques Eolicos San Lorenzo SL
</td>
<td style="text-align:right;text-align: center;">
2.11047
</td>
<td style="text-align:right;text-align: center;">
4311.98
</td>
<td style="text-align:right;text-align: center;">
37396.2
</td>
<td style="text-align:right;text-align: center;">
36.810
</td>
<td style="text-align:right;text-align: center;">
89.806
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Insular De Aguas De Lanzarote SA
</td>
<td style="text-align:right;text-align: center;">
1.86856
</td>
<td style="text-align:right;text-align: center;">
4159.91
</td>
<td style="text-align:right;text-align: center;">
28249.3
</td>
<td style="text-align:right;text-align: center;">
57.138
</td>
<td style="text-align:right;text-align: center;">
76.913
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Sierra De Selva SL
</td>
<td style="text-align:right;text-align: center;">
1.42059
</td>
<td style="text-align:right;text-align: center;">
4525.00
</td>
<td style="text-align:right;text-align: center;">
19555.0
</td>
<td style="text-align:right;text-align: center;">
47.045
</td>
<td style="text-align:right;text-align: center;">
70.524
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Naturgy Wind, S.L.
</td>
<td style="text-align:right;text-align: center;">
1.31880
</td>
<td style="text-align:right;text-align: center;">
8500.00
</td>
<td style="text-align:right;text-align: center;">
28418.0
</td>
<td style="text-align:right;text-align: center;">
39.575
</td>
<td style="text-align:right;text-align: center;">
10.388
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parques Eolicos De Cerrato SL
</td>
<td style="text-align:right;text-align: center;">
1.26532
</td>
<td style="text-align:right;text-align: center;">
6541.00
</td>
<td style="text-align:right;text-align: center;">
22817.0
</td>
<td style="text-align:right;text-align: center;">
44.755
</td>
<td style="text-align:right;text-align: center;">
34.878
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolica De Rubio SL
</td>
<td style="text-align:right;text-align: center;">
0.91962
</td>
<td style="text-align:right;text-align: center;">
2693.00
</td>
<td style="text-align:right;text-align: center;">
25486.0
</td>
<td style="text-align:right;text-align: center;">
34.607
</td>
<td style="text-align:right;text-align: center;">
60.688
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Brulles Eolica SL
</td>
<td style="text-align:right;text-align: center;">
0.88594
</td>
<td style="text-align:right;text-align: center;">
3540.57
</td>
<td style="text-align:right;text-align: center;">
16432.0
</td>
<td style="text-align:right;text-align: center;">
47.227
</td>
<td style="text-align:right;text-align: center;">
55.284
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Sistemas Energeticos Valle De Sedano SA
</td>
<td style="text-align:right;text-align: center;">
0.88563
</td>
<td style="text-align:right;text-align: center;">
897.00
</td>
<td style="text-align:right;text-align: center;">
45733.0
</td>
<td style="text-align:right;text-align: center;">
4.327
</td>
<td style="text-align:right;text-align: center;">
66.896
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Acciona Eolica Del Levante SL
</td>
<td style="text-align:right;text-align: center;">
0.65681
</td>
<td style="text-align:right;text-align: center;">
6853.00
</td>
<td style="text-align:right;text-align: center;">
21769.0
</td>
<td style="text-align:right;text-align: center;">
27.520
</td>
<td style="text-align:right;text-align: center;">
11.557
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
BON Vent De Corbera S. L. EN Constitucion
</td>
<td style="text-align:right;text-align: center;">
0.65640
</td>
<td style="text-align:right;text-align: center;">
3261.47
</td>
<td style="text-align:right;text-align: center;">
23095.6
</td>
<td style="text-align:right;text-align: center;">
36.607
</td>
<td style="text-align:right;text-align: center;">
41.453
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Molinos De La Rioja Sociedad Anonima
</td>
<td style="text-align:right;text-align: center;">
0.56574
</td>
<td style="text-align:right;text-align: center;">
2371.00
</td>
<td style="text-align:right;text-align: center;">
15787.0
</td>
<td style="text-align:right;text-align: center;">
42.017
</td>
<td style="text-align:right;text-align: center;">
54.789
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Desarrollo De Energias Renovables De La Rioja Sociedad Anonima
</td>
<td style="text-align:right;text-align: center;">
0.48954
</td>
<td style="text-align:right;text-align: center;">
2145.00
</td>
<td style="text-align:right;text-align: center;">
17441.0
</td>
<td style="text-align:right;text-align: center;">
27.297
</td>
<td style="text-align:right;text-align: center;">
62.005
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolica Campollano SA
</td>
<td style="text-align:right;text-align: center;">
0.48574
</td>
<td style="text-align:right;text-align: center;">
2592.20
</td>
<td style="text-align:right;text-align: center;">
27217.6
</td>
<td style="text-align:right;text-align: center;">
25.327
</td>
<td style="text-align:right;text-align: center;">
40.630
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Bajoz Eolica SL
</td>
<td style="text-align:right;text-align: center;">
0.39866
</td>
<td style="text-align:right;text-align: center;">
2620.34
</td>
<td style="text-align:right;text-align: center;">
9641.3
</td>
<td style="text-align:right;text-align: center;">
70.476
</td>
<td style="text-align:right;text-align: center;">
29.644
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parc Eolic De Vilalba Dels Arcs SL
</td>
<td style="text-align:right;text-align: center;">
0.02524
</td>
<td style="text-align:right;text-align: center;">
2454.07
</td>
<td style="text-align:right;text-align: center;">
9438.7
</td>
<td style="text-align:right;text-align: center;">
48.378
</td>
<td style="text-align:right;text-align: center;">
28.085
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Empordavent SL
</td>
<td style="text-align:right;text-align: center;">
-0.04223
</td>
<td style="text-align:right;text-align: center;">
2582.00
</td>
<td style="text-align:right;text-align: center;">
15176.0
</td>
<td style="text-align:right;text-align: center;">
32.635
</td>
<td style="text-align:right;text-align: center;">
25.295
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Al-Andalus Wind Power SL
</td>
<td style="text-align:right;text-align: center;">
-0.07062
</td>
<td style="text-align:right;text-align: center;">
4403.21
</td>
<td style="text-align:right;text-align: center;">
21466.1
</td>
<td style="text-align:right;text-align: center;">
12.582
</td>
<td style="text-align:right;text-align: center;">
8.591
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolica Fontesilva SL
</td>
<td style="text-align:right;text-align: center;">
-0.07618
</td>
<td style="text-align:right;text-align: center;">
1584.33
</td>
<td style="text-align:right;text-align: center;">
15524.1
</td>
<td style="text-align:right;text-align: center;">
27.756
</td>
<td style="text-align:right;text-align: center;">
37.786
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolica 2000 SL
</td>
<td style="text-align:right;text-align: center;">
-0.56288
</td>
<td style="text-align:right;text-align: center;">
1713.00
</td>
<td style="text-align:right;text-align: center;">
5765.0
</td>
<td style="text-align:right;text-align: center;">
37.852
</td>
<td style="text-align:right;text-align: center;">
16.878
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Fergo Galicia Vento -P E Mondoñedo SL
</td>
<td style="text-align:right;text-align: center;">
-0.64177
</td>
<td style="text-align:right;text-align: center;">
2288.50
</td>
<td style="text-align:right;text-align: center;">
4159.3
</td>
<td style="text-align:right;text-align: center;">
30.405
</td>
<td style="text-align:right;text-align: center;">
14.925
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Renovables Castilla La Mancha S.A.
</td>
<td style="text-align:right;text-align: center;">
-0.68969
</td>
<td style="text-align:right;text-align: center;">
1847.03
</td>
<td style="text-align:right;text-align: center;">
2902.4
</td>
<td style="text-align:right;text-align: center;">
39.595
</td>
<td style="text-align:right;text-align: center;">
11.635
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Comiolica SL
</td>
<td style="text-align:right;text-align: center;">
-0.73350
</td>
<td style="text-align:right;text-align: center;">
1938.69
</td>
<td style="text-align:right;text-align: center;">
4404.7
</td>
<td style="text-align:right;text-align: center;">
29.295
</td>
<td style="text-align:right;text-align: center;">
13.845
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Drago Renovables SL
</td>
<td style="text-align:right;text-align: center;">
-0.78124
</td>
<td style="text-align:right;text-align: center;">
1000.92
</td>
<td style="text-align:right;text-align: center;">
7735.3
</td>
<td style="text-align:right;text-align: center;">
20.826
</td>
<td style="text-align:right;text-align: center;">
22.401
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parque Eolico La Boga SL.
</td>
<td style="text-align:right;text-align: center;">
-0.79622
</td>
<td style="text-align:right;text-align: center;">
11.94
</td>
<td style="text-align:right;text-align: center;">
29316.8
</td>
<td style="text-align:right;text-align: center;">
1.001
</td>
<td style="text-align:right;text-align: center;">
9.646
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parque Eolico Santa Catalina SL
</td>
<td style="text-align:right;text-align: center;">
-0.81797
</td>
<td style="text-align:right;text-align: center;">
3645.28
</td>
<td style="text-align:right;text-align: center;">
-1664.8
</td>
<td style="text-align:right;text-align: center;">
31.780
</td>
<td style="text-align:right;text-align: center;">
-1.126
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parque Eolico Valcaire SL
</td>
<td style="text-align:right;text-align: center;">
-0.84931
</td>
<td style="text-align:right;text-align: center;">
1152.72
</td>
<td style="text-align:right;text-align: center;">
2173.0
</td>
<td style="text-align:right;text-align: center;">
45.881
</td>
<td style="text-align:right;text-align: center;">
5.981
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Energias Renovables De Peñanebina SL
</td>
<td style="text-align:right;text-align: center;">
-0.88259
</td>
<td style="text-align:right;text-align: center;">
983.00
</td>
<td style="text-align:right;text-align: center;">
5231.0
</td>
<td style="text-align:right;text-align: center;">
25.939
</td>
<td style="text-align:right;text-align: center;">
16.901
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Expertise EN Energias Renovables Eolica Y Fotovoltaica De Canarias SL
</td>
<td style="text-align:right;text-align: center;">
-0.96396
</td>
<td style="text-align:right;text-align: center;">
52.30
</td>
<td style="text-align:right;text-align: center;">
4916.5
</td>
<td style="text-align:right;text-align: center;">
34.569
</td>
<td style="text-align:right;text-align: center;">
15.809
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parque Eolico Tesosanto SL
</td>
<td style="text-align:right;text-align: center;">
-1.10299
</td>
<td style="text-align:right;text-align: center;">
1706.13
</td>
<td style="text-align:right;text-align: center;">
2842.2
</td>
<td style="text-align:right;text-align: center;">
21.008
</td>
<td style="text-align:right;text-align: center;">
4.249
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolica Del Guadiana SL
</td>
<td style="text-align:right;text-align: center;">
-1.20211
</td>
<td style="text-align:right;text-align: center;">
1571.57
</td>
<td style="text-align:right;text-align: center;">
4430.2
</td>
<td style="text-align:right;text-align: center;">
9.341
</td>
<td style="text-align:right;text-align: center;">
6.671
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Suresa Retama S.L.
</td>
<td style="text-align:right;text-align: center;">
-1.24341
</td>
<td style="text-align:right;text-align: center;">
-78.00
</td>
<td style="text-align:right;text-align: center;">
12892.0
</td>
<td style="text-align:right;text-align: center;">
-29.295
</td>
<td style="text-align:right;text-align: center;">
39.249
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Elecdey Palencia S.L.
</td>
<td style="text-align:right;text-align: center;">
-1.25359
</td>
<td style="text-align:right;text-align: center;">
987.27
</td>
<td style="text-align:right;text-align: center;">
1581.5
</td>
<td style="text-align:right;text-align: center;">
22.016
</td>
<td style="text-align:right;text-align: center;">
4.760
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolica Mirasierra SL
</td>
<td style="text-align:right;text-align: center;">
-1.36573
</td>
<td style="text-align:right;text-align: center;">
1123.48
</td>
<td style="text-align:right;text-align: center;">
995.8
</td>
<td style="text-align:right;text-align: center;">
17.064
</td>
<td style="text-align:right;text-align: center;">
1.780
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Helios Patrimonial 1 SL
</td>
<td style="text-align:right;text-align: center;">
-1.50762
</td>
<td style="text-align:right;text-align: center;">
237.85
</td>
<td style="text-align:right;text-align: center;">
3468.1
</td>
<td style="text-align:right;text-align: center;">
5.379
</td>
<td style="text-align:right;text-align: center;">
8.411
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Sistemes Energetics Conesa I S.L.
</td>
<td style="text-align:right;text-align: center;">
-1.56230
</td>
<td style="text-align:right;text-align: center;">
878.00
</td>
<td style="text-align:right;text-align: center;">
-988.0
</td>
<td style="text-align:right;text-align: center;">
16.649
</td>
<td style="text-align:right;text-align: center;">
-3.193
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Inversiones Fotovoltaicas Mallorquinas SL.
</td>
<td style="text-align:right;text-align: center;">
-1.57826
</td>
<td style="text-align:right;text-align: center;">
272.75
</td>
<td style="text-align:right;text-align: center;">
930.1
</td>
<td style="text-align:right;text-align: center;">
11.661
</td>
<td style="text-align:right;text-align: center;">
3.235
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Helios Patrimonial 2 SL
</td>
<td style="text-align:right;text-align: center;">
-1.60027
</td>
<td style="text-align:right;text-align: center;">
190.12
</td>
<td style="text-align:right;text-align: center;">
2472.1
</td>
<td style="text-align:right;text-align: center;">
4.315
</td>
<td style="text-align:right;text-align: center;">
6.145
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Fotovoltaica Los Navalmorales SL
</td>
<td style="text-align:right;text-align: center;">
-1.60453
</td>
<td style="text-align:right;text-align: center;">
143.00
</td>
<td style="text-align:right;text-align: center;">
966.0
</td>
<td style="text-align:right;text-align: center;">
12.228
</td>
<td style="text-align:right;text-align: center;">
2.581
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Energias Naturales La Calzada SL
</td>
<td style="text-align:right;text-align: center;">
-1.69272
</td>
<td style="text-align:right;text-align: center;">
754.00
</td>
<td style="text-align:right;text-align: center;">
-1983.0
</td>
<td style="text-align:right;text-align: center;">
15.561
</td>
<td style="text-align:right;text-align: center;">
-6.834
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parque Eolico El Moral SL
</td>
<td style="text-align:right;text-align: center;">
-1.74511
</td>
<td style="text-align:right;text-align: center;">
267.00
</td>
<td style="text-align:right;text-align: center;">
-310.0
</td>
<td style="text-align:right;text-align: center;">
7.935
</td>
<td style="text-align:right;text-align: center;">
-1.240
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Eolica De Medinaceli SL
</td>
<td style="text-align:right;text-align: center;">
-1.91245
</td>
<td style="text-align:right;text-align: center;">
324.00
</td>
<td style="text-align:right;text-align: center;">
-2854.0
</td>
<td style="text-align:right;text-align: center;">
4.302
</td>
<td style="text-align:right;text-align: center;">
-4.142
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Wigep Andalucia SA
</td>
<td style="text-align:right;text-align: center;">
-2.05070
</td>
<td style="text-align:right;text-align: center;">
296.00
</td>
<td style="text-align:right;text-align: center;">
-3762.0
</td>
<td style="text-align:right;text-align: center;">
4.611
</td>
<td style="text-align:right;text-align: center;">
-10.634
</td>
</tr>
<tr>
<td style="text-align:left;text-align: center;font-weight: bold;text-align: left;">
Parque Eolico Energia Puertosol SL.
</td>
<td style="text-align:right;text-align: center;">
-2.12892
</td>
<td style="text-align:right;text-align: center;">
-945.38
</td>
<td style="text-align:right;text-align: center;">
2488.6
</td>
<td style="text-align:right;text-align: center;">
-17.969
</td>
<td style="text-align:right;text-align: center;">
5.899
</td>
</tr>
</tbody>
</table></div>
<p>Las puntuaciones de los casos en nuestro indicador (componente principal) pueden integrarse en un <em>data frame</em> y ser utilizadas como cualquier otra variable en un análisis multivariante, sabiendo que este indicador asume gran parte de la información que, como caracterización de las distintas empresas, contenían las 4 variables originales.</p>
</div>
<div id="materiales-para-realizar-las-prácticas-del-capítulo.-4" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> Materiales para realizar las prácticas del capítulo.<a class="anchor" aria-label="anchor" href="#materiales-para-realizar-las-pr%C3%A1cticas-del-cap%C3%ADtulo.-4"><i class="fas fa-link"></i></a>
</h2>
<p>En esta sección se muestran los links de acceso a los diferentes materiales (<em>scripts</em>, datos…) necesarios para llevar a cabo los contenidos prácticos del capítulo.</p>
<p><strong>Datos (en formato Microsoft (R) Excel (R)):</strong></p>
<ul>
<li>eolica_60.xlsx (<a href="https://docs.google.com/spreadsheets/d/1G7yk22TShY1bYS1i9v4PfVi_HCkOG2ZO/edit?usp=sharing&amp;ouid=115375878280465826079&amp;rtpof=true&amp;sd=true">obtener aquí</a>)</li>
</ul>
<p><strong>Scripts:</strong></p>
<ul>
<li>componentes_eolica.R (<a href="https://drive.google.com/file/d/1d0ss6sh-jIAcrrlWSHHQI_CfRtiDqANX/view?usp=sharing">obtener aquí</a>)</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="an%C3%A1lisis-previo-de-datos..html"><span class="header-section-number">5</span> Análisis previo de datos.</a></div>
<div class="next"><a href="an%C3%A1lisis-cl%C3%BAster..html"><span class="header-section-number">7</span> Análisis Clúster.</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#componentes-principales."><span class="header-section-number">6</span> Componentes principales.</a></li>
<li><a class="nav-link" href="#introducci%C3%B3n.-2"><span class="header-section-number">6.1</span> Introducción.</a></li>
<li><a class="nav-link" href="#informaci%C3%B3n-y-varianza."><span class="header-section-number">6.2</span> Información y varianza.</a></li>
<li><a class="nav-link" href="#c%C3%A1lculo-de-componentes."><span class="header-section-number">6.3</span> Cálculo de componentes.</a></li>
<li><a class="nav-link" href="#retenci%C3%B3n-de-componentes-principales."><span class="header-section-number">6.4</span> Retención de componentes principales.</a></li>
<li><a class="nav-link" href="#puntuaciones-de-los-casos-scores"><span class="header-section-number">6.5</span> Puntuaciones de los casos (scores)</a></li>
<li><a class="nav-link" href="#materiales-para-realizar-las-pr%C3%A1cticas-del-cap%C3%ADtulo.-4"><span class="header-section-number">6.6</span> Materiales para realizar las prácticas del capítulo.</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R-Stars: La Guía</strong>" was written by Miguel-Ángel Tarancón. It was last built on 2025-09-15.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
